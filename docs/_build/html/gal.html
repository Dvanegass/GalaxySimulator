

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Galaxies &mdash; GalSim 2.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Simple Profiles" href="simple.html" />
    <link rel="prev" title="Phase-screen PSFs" href="phase_psf.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GalSim
          

          
          </a>

          
            
            
              <div class="version">
                2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="image.html">Images and Related Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="sb.html">Surface Brightness Profiles</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gsobject.html">The GSObject base class</a></li>
<li class="toctree-l2"><a class="reference internal" href="psf.html">Point-spread functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="phase_psf.html">Phase-screen PSFs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Galaxies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exponenatial-profile">Exponenatial Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#de-vaucouleurs-profile">De Vaucouleurs Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sersic-profile">Sersic Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inclined-exponential-profile">Inclined Exponential Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inclined-sersic-profile">Inclined Sersic Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spergel-profile">Spergel Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#real-galaxy">“Real” Galaxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#knots-defined-by-a-random-walk">Knots defined by a “random walk”</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="simple.html">Simple Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="arbitrary.html">Aribtrary Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="composite.html">Composite Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="transform.html">Transformed Profiles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wcs.html">World Coordinate Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">Noise and Random Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="chromatic.html">Wavelength-dependent Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="shear.html">Weak Lensing Shear</a></li>
<li class="toctree-l1"><a class="reference internal" href="coord.html">Angles and Coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Helper Functions and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">The Config Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="hsm.html">The HSM Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="des.html">The DES Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="wfirst.html">The WFIRST Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Revision History</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GalSim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="sb.html">Surface Brightness Profiles</a> &raquo;</li>
        
      <li>Galaxies</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/gal.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="galaxies">
<h1>Galaxies<a class="headerlink" href="#galaxies" title="Permalink to this headline">¶</a></h1>
<p>There are a number of profiles that are designed to be used for galaxy profiles.
Again though, there is nothing restricting these classes to be used only for that purpose
if you have another use case for which one would be relevant.</p>
<div class="section" id="exponenatial-profile">
<h2>Exponenatial Profile<a class="headerlink" href="#exponenatial-profile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="galsim.Exponential">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">Exponential</code><span class="sig-paren">(</span><em class="sig-param">half_light_radius=None</em>, <em class="sig-param">scale_radius=None</em>, <em class="sig-param">flux=1.0</em>, <em class="sig-param">gsparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/exponential.html#Exponential"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.Exponential" title="Permalink to this definition">¶</a></dt>
<dd><p>A class describing an exponential profile.</p>
<p>Surface brightness profile with I(r) ~ exp[-r/scale_radius].  This is a special case of
the Sersic profile, but is given a separate class since the Fourier transform has closed form
and can be generated without lookup tables.</p>
<p>An Exponential can be initialized using one (and only one) of two possible size parameters:
<code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code>.  Exactly one of these two is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>half_light_radius</strong> – The half-light radius of the profile.  Typically given in arcsec.
[One of <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> is required.]</p></li>
<li><p><strong>scale_radius</strong> – The scale radius of the profile.  Typically given in arcsec.
[One of <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> is required.]</p></li>
<li><p><strong>flux</strong> – The flux (in photons/cm^2/s) of the profile. [default: 1]</p></li>
<li><p><strong>gsparams</strong> – An optional GSParams argument.  See the docstring for GSParams for
details. [default: None]</p></li>
</ul>
</dd>
</dl>
<p>In addition to the usual GSObject methods and attributes, Exponential has the following access
properties:</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scale_radius</strong> – The scale radius of the profile</p></li>
<li><p><strong>half_light_radius</strong> – The half-light radius of the profile</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="de-vaucouleurs-profile">
<h2>De Vaucouleurs Profile<a class="headerlink" href="#de-vaucouleurs-profile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="galsim.DeVaucouleurs">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">DeVaucouleurs</code><span class="sig-paren">(</span><em class="sig-param">half_light_radius=None</em>, <em class="sig-param">scale_radius=None</em>, <em class="sig-param">flux=1.0</em>, <em class="sig-param">trunc=0.0</em>, <em class="sig-param">flux_untruncated=False</em>, <em class="sig-param">gsparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/sersic.html#DeVaucouleurs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.DeVaucouleurs" title="Permalink to this definition">¶</a></dt>
<dd><p>A class describing DeVaucouleurs profile objects.</p>
<p>Surface brightness profile with I(r) ~ exp[-(r/scale_radius)^{1/4}].  This is completely
equivalent to a Sersic with n=4.</p>
<p>For more information, refer to</p>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/De_Vaucouleurs'_law">http://en.wikipedia.org/wiki/De_Vaucouleurs’_law</a></p>
<p>A DeVaucouleurs can be initialized using one (and only one) of two possible size parameters:
<code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code>.  Exactly one of these two is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scale_radius</strong> – The value of scale radius of the profile.  Typically given in arcsec.
[One of <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> is required.]</p></li>
<li><p><strong>half_light_radius</strong> – The half-light radius of the profile.  Typically given in arcsec.
[One of <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> is required.]</p></li>
<li><p><strong>flux</strong> – The flux (in photons/cm^2/s) of the profile. [default: 1]</p></li>
<li><p><strong>trunc</strong> – An optional truncation radius at which the profile is made to drop to
zero, in the same units as the size parameter.
[default: 0, indicating no truncation]</p></li>
<li><p><strong>flux_untruncated</strong> – Should the provided <code class="docutils literal notranslate"><span class="pre">flux</span></code> and <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> refer to the
untruncated profile? See the docstring for Sersic for more details.
[default: False]</p></li>
<li><p><strong>gsparams</strong> – An optional GSParams argument.  See the docstring for GSParams for
details. [default: None]</p></li>
</ul>
</dd>
</dl>
<p>In addition to the usual GSObject methods and attributes, DeVaucouleurs has the following
access properties:</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scale_radius</strong> – The scale radius</p></li>
<li><p><strong>half_light_radius</strong> – The half-light radius</p></li>
<li><p><strong>trunc</strong> – The truncation radius (if any)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="sersic-profile">
<h2>Sersic Profile<a class="headerlink" href="#sersic-profile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="galsim.Sersic">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">Sersic</code><span class="sig-paren">(</span><em class="sig-param">n</em>, <em class="sig-param">half_light_radius=None</em>, <em class="sig-param">scale_radius=None</em>, <em class="sig-param">flux=1.0</em>, <em class="sig-param">trunc=0.0</em>, <em class="sig-param">flux_untruncated=False</em>, <em class="sig-param">gsparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/sersic.html#Sersic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.Sersic" title="Permalink to this definition">¶</a></dt>
<dd><p>A class describing a Sersic profile.</p>
<p>The Sersic surface brightness profile is characterized by three properties: its Sersic index
<code class="docutils literal notranslate"><span class="pre">n</span></code>, its <code class="docutils literal notranslate"><span class="pre">flux</span></code>, and either the <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code>.  Given these
properties, the surface brightness profile scales as I(r) ~ exp[-(r/scale_radius)^{1/n}], or
I(r) ~ exp[-b*(r/half_light_radius)^{1/n}] (where b is calculated to give the right
half-light radius).</p>
<p>For more information, refer to</p>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Sersic_profile">http://en.wikipedia.org/wiki/Sersic_profile</a></p>
<p>The allowed range of values for the <code class="docutils literal notranslate"><span class="pre">n</span></code> parameter is 0.3 &lt;= n &lt;= 6.2.  An exception will be
thrown if you provide a value outside that range.  Below n=0.3, there are severe numerical
problems.  Above n=6.2, we found that the code begins to be inaccurate when sheared or
magnified (at the level of upcoming shear surveys), so we do not recommend extending beyond
this.  See Issues #325 and #450 for more details.</p>
<p>Sersic profile calculations take advantage of Hankel transform tables that are precomputed for a
given value of n when the Sersic profile is initialized.  Making additional objects with the
same n can therefore be many times faster than making objects with different values of n that
have not been used before.  Moreover, these Hankel transforms are only cached for a maximum of
100 different n values at a time.  For this reason, for large sets of simulations, it is worth
considering the use of only discrete n values rather than allowing it to vary continuously.  For
more details, see <a class="reference external" href="https://github.com/GalSim-developers/GalSim/issues/566">https://github.com/GalSim-developers/GalSim/issues/566</a>.</p>
<p>Note that if you are building many Sersic profiles using truncation, the code will be more
efficient if the truncation is always the same multiple of <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code>, since it caches
many calculations that depend on the ratio <code class="docutils literal notranslate"><span class="pre">trunc/scale_radius</span></code>.</p>
<p>A Sersic can be initialized using one (and only one) of two possible size parameters:
<code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code>.  Exactly one of these two is required.</p>
<p>Flux of a truncated profile:</p>
<p>If you are truncating the profile, the optional parameter, <code class="docutils literal notranslate"><span class="pre">flux_untruncated</span></code>, specifies
whether the <code class="docutils literal notranslate"><span class="pre">flux</span></code> and <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> specifications correspond to the untruncated
profile (<code class="docutils literal notranslate"><span class="pre">True</span></code>) or to the truncated profile (<code class="docutils literal notranslate"><span class="pre">False</span></code>, default).  The impact of this
parameter is a little subtle, so we’ll go through a few examples to show how it works.</p>
<p>First, let’s examine the case where we specify the size according to the half-light radius.
If <code class="docutils literal notranslate"><span class="pre">flux_untruncated</span></code> is True (and <code class="docutils literal notranslate"><span class="pre">trunc</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>), then the profile will be identical
to the version without truncation up to the truncation radius, beyond which it drops to 0.
In this case, the actual half-light radius will be different from the specified half-light
radius.  The half_light_radius property will return the true half-light radius.  Similarly,
the actual flux will not be the same as the specified value; the true flux is also returned
by the flux property.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Sersic</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">half_light_radius</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">flux</span><span class="o">=</span><span class="mf">40.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Sersic</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">half_light_radius</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">flux</span><span class="o">=</span><span class="mf">40.</span><span class="p">,</span> <span class="n">trunc</span><span class="o">=</span><span class="mf">10.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Sersic</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">half_light_radius</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">flux</span><span class="o">=</span><span class="mf">40.</span><span class="p">,</span> <span class="n">trunc</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> \
<span class="go">                                flux_untruncated=True)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span><span class="o">.</span><span class="n">xValue</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">PositionD</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">237.3094228615618</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span><span class="o">.</span><span class="n">xValue</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">PositionD</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">142.54505376530574    # Normalization and scale radius adjusted (same half-light radius)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span><span class="o">.</span><span class="n">xValue</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">PositionD</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">237.30942286156187</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span><span class="o">.</span><span class="n">xValue</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">PositionD</span><span class="p">(</span><span class="mf">10.0001</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">0.011776164687304694</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span><span class="o">.</span><span class="n">xValue</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">PositionD</span><span class="p">(</span><span class="mf">10.0001</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span><span class="o">.</span><span class="n">xValue</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">PositionD</span><span class="p">(</span><span class="mf">10.0001</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">0.0</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span><span class="o">.</span><span class="n">half_light_radius</span>
<span class="go">2.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span><span class="o">.</span><span class="n">half_light_radius</span>
<span class="go">2.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span><span class="o">.</span><span class="n">half_light_radius</span>
<span class="go">1.9795101383056892    # The true half-light radius is smaller than the specified value</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span><span class="o">.</span><span class="n">flux</span>
<span class="go">40.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span><span class="o">.</span><span class="n">flux</span>
<span class="go">40.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span><span class="o">.</span><span class="n">flux</span>
<span class="go">34.56595186009519     # Flux is missing due to truncation</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span><span class="o">.</span><span class="n">scale_radius</span>
<span class="go">0.003262738739834598</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span><span class="o">.</span><span class="n">scale_radius</span>
<span class="go">0.004754602453641744  # the scale radius needed adjustment to accommodate HLR</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span><span class="o">.</span><span class="n">scale_radius</span>
<span class="go">0.003262738739834598  # the scale radius is still identical to the untruncated case</span>
</pre></div>
</div>
<p>When the truncated Sersic scale is specified with <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code>, the behavior between the
three cases (untruncated, <code class="docutils literal notranslate"><span class="pre">flux_untruncated=True</span></code> and <code class="docutils literal notranslate"><span class="pre">flux_untruncated=False</span></code>) will be
somewhat different from above.  Since it is the scale radius that is being specified, and since
truncation does not change the scale radius the way it can change the half-light radius, the
scale radius will remain unchanged in all cases.  This also results in the half-light radius
being the same between the two truncated cases (although different from the untruncated case).
The flux normalization is the only difference between <code class="docutils literal notranslate"><span class="pre">flux_untruncated=True</span></code> and
<code class="docutils literal notranslate"><span class="pre">flux_untruncated=False</span></code> in this case.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Sersic</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">scale_radius</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">flux</span><span class="o">=</span><span class="mf">40.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Sersic</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">scale_radius</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">flux</span><span class="o">=</span><span class="mf">40.</span><span class="p">,</span> <span class="n">trunc</span><span class="o">=</span><span class="mf">10.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Sersic</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">scale_radius</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">flux</span><span class="o">=</span><span class="mf">40.</span><span class="p">,</span> <span class="n">trunc</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> \
<span class="go">                                flux_untruncated=True)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span><span class="o">.</span><span class="n">xValue</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">PositionD</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">1.010507575186637</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span><span class="o">.</span><span class="n">xValue</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">PositionD</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">5.786692612210923     # Normalization adjusted to accomodate the flux within trunc radius</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span><span class="o">.</span><span class="n">xValue</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">PositionD</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">1.010507575186637</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span><span class="o">.</span><span class="n">half_light_radius</span>
<span class="go">38.311372735390016</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span><span class="o">.</span><span class="n">half_light_radius</span>
<span class="go">5.160062547614234</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span><span class="o">.</span><span class="n">half_light_radius</span>
<span class="go">5.160062547614234     # For the truncated cases, the half-light radii are the same</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span><span class="o">.</span><span class="n">flux</span>
<span class="go">40.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span><span class="o">.</span><span class="n">flux</span>
<span class="go">40.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span><span class="o">.</span><span class="n">flux</span>
<span class="go">6.985044085834393     # Flux is missing due to truncation</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj1</span><span class="o">.</span><span class="n">scale_radius</span>
<span class="go">0.05</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj2</span><span class="o">.</span><span class="n">scale_radius</span>
<span class="go">0.05</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sersic_obj3</span><span class="o">.</span><span class="n">scale_radius</span>
<span class="go">0.05</span>
<span class="go">half_light_radius:  The half-light radius</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – The Sersic index, n.</p></li>
<li><p><strong>half_light_radius</strong> – The half-light radius of the profile.  Typically given in arcsec.
[One of <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> is required.]</p></li>
<li><p><strong>scale_radius</strong> – The scale radius of the profile.  Typically given in arcsec.
[One of <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> is required.]</p></li>
<li><p><strong>flux</strong> – The flux (in photons/cm^2/s) of the profile. [default: 1]</p></li>
<li><p><strong>trunc</strong> – An optional truncation radius at which the profile is made to drop to
zero, in the same units as the size parameter.
[default: 0, indicating no truncation]</p></li>
<li><p><strong>flux_untruncated</strong> – Should the provided <code class="docutils literal notranslate"><span class="pre">flux</span></code> and <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> refer to the
untruncated profile? See below for more details. [default: False]</p></li>
<li><p><strong>gsparams</strong> – An optional GSParams argument.  See the docstring for GSParams for
details. [default: None]</p></li>
</ul>
</dd>
</dl>
<p>In addition to the usual GSObject methods and attributes, Sersic has the following access
properties:</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – The Sersic parameter n</p></li>
<li><p><strong>scale_raddius</strong> – The scale radius</p></li>
<li><p><strong>half_light_radius</strong> – The half-light radius</p></li>
<li><p><strong>trunc</strong> – The truncation radius (if any)</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="galsim.Sersic.calculateHLRFactor">
<code class="sig-name descname">calculateHLRFactor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/sersic.html#Sersic.calculateHLRFactor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.Sersic.calculateHLRFactor" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the half-light-radius in units of the scale radius.</p>
</dd></dl>

<dl class="method">
<dt id="galsim.Sersic.calculateIntegratedFlux">
<code class="sig-name descname">calculateIntegratedFlux</code><span class="sig-paren">(</span><em class="sig-param">r</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/sersic.html#Sersic.calculateIntegratedFlux"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.Sersic.calculateIntegratedFlux" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the fraction of the total flux enclosed within a given radius, r</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="inclined-exponential-profile">
<h2>Inclined Exponential Profile<a class="headerlink" href="#inclined-exponential-profile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="galsim.InclinedExponential">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">InclinedExponential</code><span class="sig-paren">(</span><em class="sig-param">inclination</em>, <em class="sig-param">half_light_radius=None</em>, <em class="sig-param">scale_radius=None</em>, <em class="sig-param">scale_height=None</em>, <em class="sig-param">scale_h_over_r=None</em>, <em class="sig-param">flux=1.0</em>, <em class="sig-param">gsparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/inclined.html#InclinedExponential"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.InclinedExponential" title="Permalink to this definition">¶</a></dt>
<dd><p>A class describing an inclined exponential profile.</p>
<p>The Inclined Exponential surface brightness profile is characterized by three properties: its
inclination angle (where 0 degrees = face-on and 90 degrees = edge-on), its scale radius, and
its scale height. The 3D light distribution function is:</p>
<blockquote>
<div><p>I(R,z) = I_0 / (2h_s) * sech^2 (z/h_s) * exp(-R/R_s)</p>
</div></blockquote>
<p>where z is the distance along the minor axis, R is the radial distance from the minor axis,
R_s is the scale radius of the disk, h_s is the scale height of the disk, and I_0 is the central
surface brightness of the face-on disk. The 2D light distribution function is then determined
from the scale height and radius here, along with the inclination angle.</p>
<p>In this implementation, the profile is inclined along the y-axis. This means that it will likely
need to be rotated in most circumstances.</p>
<p>At present, this profile is not enabled for photon-shooting.</p>
<p>A profile can be initialized using one (and only one) of two possible size parameters:
<code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code>.  Exactly one of these two is required. Similarly,
at most one of <code class="docutils literal notranslate"><span class="pre">scale_height</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_h_over_r</span></code> is required; if neither is given, the
default of scale_h_over_r = 0.1 will be used. Note that if half_light_radius and
scale_h_over_r are supplied (or the default value of scale_h_over_r is used),
scale_h_over_r will be assumed to refer to the scale radius, not the half-light radius.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inclination</strong> – The inclination angle, which must be a galsim.Angle instance</p></li>
<li><p><strong>scale_radius</strong> – The scale radius of the exponential disk.  Typically given in
arcsec. This can be compared to the ‘scale_radius’ parameter of the
galsim.Exponential class, and in the face-on case, the same scale
radius will result in the same 2D light distribution as with that
class.</p></li>
<li><p><strong>half_light_radius</strong> – The half-light radius of the exponential disk, as an alternative to
the scale radius.</p></li>
<li><p><strong>scale_height</strong> – The scale height of the exponential disk.  Typically given in arcsec.
[default: None]</p></li>
<li><p><strong>scale_h_over_r</strong> – In lieu of the scale height, you may also specify the ratio of the
scale height to the scale radius. [default: 0.1]</p></li>
<li><p><strong>flux</strong> – The flux (in photons) of the profile. [default: 1]</p></li>
<li><p><strong>gsparams</strong> – An optional GSParams argument.  See the docstring for GSParams for
details. [default: None]</p></li>
</ul>
</dd>
</dl>
<p>In addition to the usual GSObject methods and attributes, InclinedExponential has the following
access properties:</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inclination</strong> – The inclination angle</p></li>
<li><p><strong>scale_radius</strong> – The scale radius of the exponential disk</p></li>
<li><p><strong>disk_half_light_radius</strong> – The half-light radius of the exponential disk</p></li>
<li><p><strong>scale_height</strong> – The scale height of the disk</p></li>
<li><p><strong>scale_h_over_r</strong> – The ratio scale_height / scale_radius</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="inclined-sersic-profile">
<h2>Inclined Sersic Profile<a class="headerlink" href="#inclined-sersic-profile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="galsim.InclinedSersic">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">InclinedSersic</code><span class="sig-paren">(</span><em class="sig-param">n</em>, <em class="sig-param">inclination</em>, <em class="sig-param">half_light_radius=None</em>, <em class="sig-param">scale_radius=None</em>, <em class="sig-param">scale_height=None</em>, <em class="sig-param">scale_h_over_r=None</em>, <em class="sig-param">flux=1.0</em>, <em class="sig-param">trunc=0.0</em>, <em class="sig-param">flux_untruncated=False</em>, <em class="sig-param">gsparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/inclined.html#InclinedSersic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.InclinedSersic" title="Permalink to this definition">¶</a></dt>
<dd><p>A class describing an inclined sersic profile. This class is general, and so for certain
special cases, more specialized classes will be more efficient. For the case where n==1
with no truncation, the InclinedExponential class will be much more efficient. For the case
where the inclination angle is zero (face-on), the Sersic class will be slightly more efficient.</p>
<p>The InclinedSersic surface brightness profile is characterized by four properties: its
Sersic index <code class="docutils literal notranslate"><span class="pre">n</span></code>, its inclination angle (where 0 degrees = face-on and 90 degrees = edge-on),
its scale radius, and its scale height. The 3D light distribution function is:</p>
<blockquote>
<div><p>I(R,z) = I_0 / (2h_s) * sech^2 (z/h_s) * exp[-b*(R/r_s)^{1/n}]</p>
</div></blockquote>
<p>where z is the distance along the minor axis, R is the radial distance from the minor axis,
r_s is the scale radius of the disk, h_s is the scale height of the disk, and I_0 is the central
surface brightness of the face-on disk. The 2D light distribution function is then determined
from the scale height and radius here, along with the inclination angle.</p>
<p>In this implementation, the profile is inclined along the y-axis. This means that it will likely
need to be rotated in most circumstances.</p>
<p>At present, this profile is not enabled for photon-shooting.</p>
<p>The allowed range of values for the <code class="docutils literal notranslate"><span class="pre">n</span></code> parameter is 0.3 &lt;= n &lt;= 6.2.  An exception will be
thrown if you provide a value outside that range, matching the range of the Sersic profile.</p>
<p>This class shares the caching of Hankel transformations with the Sersic class; see that
class for documentation on efficiency considerations with regards to caching.</p>
<p>A profile can be initialized using one (and only one) of two possible size parameters:
<code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code>.  Exactly one of these two is required. Similarly,
at most one of <code class="docutils literal notranslate"><span class="pre">scale_height</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_h_over_r</span></code> is required; if neither is given, the
default of scale_h_over_r = 0.1 will be used. Note that if half_light_radius and
scale_h_over_r are supplied (or the default value of scale_h_over_r is used),
scale_h_over_r will be assumed to refer to the scale radius, not the half-light radius.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – The Sersic index, n.</p></li>
<li><p><strong>inclination</strong> – The inclination angle, which must be a galsim.Angle instance</p></li>
<li><p><strong>scale_radius</strong> – The scale radius of the disk.  Typically given in arcsec.
This can be compared to the ‘scale_radius’ parameter of the
galsim.Sersic class, and in the face-on case, the same scale
radius will result in the same 2D light distribution as with that
class. Exactly one of this and half_light_radius must be provided.</p></li>
<li><p><strong>half_light_radius</strong> – The half-light radius of disk when seen face-on. Exactly one of this
and scale_radius must be provided.</p></li>
<li><p><strong>scale_height</strong> – The scale height of the exponential disk.  Typically given in arcsec.
[default: None]</p></li>
<li><p><strong>scale_h_over_r</strong> – In lieu of the scale height, you may specify the ratio of the
scale height to the scale radius. [default: 0.1]</p></li>
<li><p><strong>flux</strong> – The flux (in photons) of the profile. [default: 1]</p></li>
<li><p><strong>trunc</strong> – An optional truncation radius at which the profile is made to drop to
zero, in the same units as the size parameter.
[default: 0, indicating no truncation]</p></li>
<li><p><strong>flux_untruncated</strong> – Should the provided <code class="docutils literal notranslate"><span class="pre">flux</span></code> and <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> refer to the
untruncated profile? See the documentation of the Sersic class for
more details. [default: False]</p></li>
<li><p><strong>gsparams</strong> – An optional GSParams argument.  See the docstring for GSParams for
details. [default: None]</p></li>
</ul>
</dd>
</dl>
<p>In addition to the usual GSObject methods and attributes, InclinedSersic has the following
access properties:</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n                       The Sersic parameter n</strong></p></li>
<li><p><strong>inclination</strong> – The inclination angle</p></li>
<li><p><strong>scale_radius</strong> – The scale radius of the exponential disk</p></li>
<li><p><strong>disk_half_light_radius</strong> – The half-light radius of the exponential disk</p></li>
<li><p><strong>scale_height</strong> – The scale height of the disk</p></li>
<li><p><strong>scale_h_over_r</strong> – The ratio scale_height / scale_radius</p></li>
<li><p><strong>trunc</strong> – The truncation radius (if any)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="spergel-profile">
<h2>Spergel Profile<a class="headerlink" href="#spergel-profile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="galsim.Spergel">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">Spergel</code><span class="sig-paren">(</span><em class="sig-param">nu</em>, <em class="sig-param">half_light_radius=None</em>, <em class="sig-param">scale_radius=None</em>, <em class="sig-param">flux=1.0</em>, <em class="sig-param">gsparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/spergel.html#Spergel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.Spergel" title="Permalink to this definition">¶</a></dt>
<dd><p>A class describing a Spergel profile.</p>
<p>The Spergel surface brightness profile is characterized by three properties: its Spergel index
<code class="docutils literal notranslate"><span class="pre">nu</span></code>, its <code class="docutils literal notranslate"><span class="pre">flux</span></code>, and either the <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code>.  Given these
properties, the surface brightness profile scales as I(r) ~ (r/scale_radius)^{nu} *
K_{nu}(r/scale_radius), where K_{nu} is the modified Bessel function of the second kind.</p>
<p>The Spergel profile is intended as a generic galaxy profile, somewhat like a Sersic profile, but
with the advantage of being analytic in both real space and Fourier space.  The Spergel index
<code class="docutils literal notranslate"><span class="pre">nu</span></code> plays a similar role to the Sersic index <code class="docutils literal notranslate"><span class="pre">n</span></code>, in that it adjusts the relative peakiness
of the profile core and the relative prominence of the profile wings.  At <code class="docutils literal notranslate"><span class="pre">nu</span> <span class="pre">=</span> <span class="pre">0.5</span></code>, the
Spergel profile is equivalent to an Exponential profile (or alternatively an <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">1.0</span></code>
Sersic profile).  At <code class="docutils literal notranslate"><span class="pre">nu</span> <span class="pre">=</span> <span class="pre">-0.6</span></code> (and in the radial range near the half-light radius), the
Spergel profile is similar to a DeVaucouleurs profile or <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">4.0</span></code> Sersic profile.</p>
<p>Note that for <code class="docutils literal notranslate"><span class="pre">nu</span> <span class="pre">&lt;=</span> <span class="pre">0.0</span></code>, the Spergel profile surface brightness diverges at the origin.
This may lead to rendering problems if the profile is not convolved by either a PSF or a pixel
and the profile center is precisely on a pixel center.</p>
<p>Due to its analytic Fourier transform and depending on the indices <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">nu</span></code>, the Spergel
profile can be considerably faster to draw than the roughly equivalent Sersic profile.  For
example, the <code class="docutils literal notranslate"><span class="pre">nu</span> <span class="pre">=</span> <span class="pre">-0.6</span></code> Spergel profile is roughly 3x faster to draw than an <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">4.0</span></code>
Sersic profile once the Sersic profile cache has been set up.  However, if not taking advantage
of the cache, for example, if drawing Sersic profiles with <code class="docutils literal notranslate"><span class="pre">n</span></code> continuously varying near 4.0
and Spergel profiles with <code class="docutils literal notranslate"><span class="pre">nu</span></code> continuously varying near -0.6, then the Spergel profiles are
about 50x faster to draw.  At the other end of the galaxy profile spectrum, the <code class="docutils literal notranslate"><span class="pre">nu</span> <span class="pre">=</span> <span class="pre">0.5</span></code>
Spergel profile, <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">1.0</span></code> Sersic profile, and the Exponential profile all take about the
same amount of time to draw if cached, and the Spergel profile is about 2x faster than the
Sersic profile if uncached.</p>
<p>For more information, refer to</p>
<blockquote>
<div><p>D. N. Spergel, “ANALYTICAL GALAXY PROFILES FOR PHOTOMETRIC AND LENSING ANALYSIS,”
ASTROPHYS J SUPPL S 191(1), 58-65 (2010) [doi:10.1088/0067-0049/191/1/58].</p>
</div></blockquote>
<p>The allowed range of values for the <code class="docutils literal notranslate"><span class="pre">nu</span></code> parameter is -0.85 &lt;= nu &lt;= 4.  An exception will be
thrown if you provide a value outside that range.  The lower limit is set above the theoretical
lower limit of -1 due to numerical difficulties integrating the <em>very</em> peaky nu &lt; -0.85
profiles.  The upper limit is set to avoid numerical difficulties evaluating the modified
Bessel function of the second kind.</p>
<p>A Spergel profile can be initialized using one (and only one) of two possible size parameters:
<code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code>.  Exactly one of these two is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nu</strong> – The Spergel index, nu.</p></li>
<li><p><strong>half_light_radius</strong> – The half-light radius of the profile.  Typically given in arcsec.
[One of <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> is required.]</p></li>
<li><p><strong>scale_radius</strong> – The scale radius of the profile.  Typically given in arcsec.
[One of <code class="docutils literal notranslate"><span class="pre">scale_radius</span></code> or <code class="docutils literal notranslate"><span class="pre">half_light_radius</span></code> is required.]</p></li>
<li><p><strong>flux</strong> – The flux (in photons/cm^2/s) of the profile. [default: 1]</p></li>
<li><p><strong>gsparams</strong> – An optional GSParams argument.  See the docstring for GSParams for
details. [default: None]</p></li>
</ul>
</dd>
</dl>
<p>In addition to the usual GSObject methods and attributes, the Spergel profile has the following
access properties:</p>
<dl class="simple">
<dt>Atrributes:</dt><dd><p>nu:                 The Spergel index, nu
scale_radius:       The scale radius
half_light_radius:  The half-light radius</p>
</dd>
</dl>
<dl class="method">
<dt id="galsim.Spergel.calculateFluxRadius">
<code class="sig-name descname">calculateFluxRadius</code><span class="sig-paren">(</span><em class="sig-param">f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/spergel.html#Spergel.calculateFluxRadius"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.Spergel.calculateFluxRadius" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the radius within which the total flux is f</p>
</dd></dl>

<dl class="method">
<dt id="galsim.Spergel.calculateIntegratedFlux">
<code class="sig-name descname">calculateIntegratedFlux</code><span class="sig-paren">(</span><em class="sig-param">r</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/spergel.html#Spergel.calculateIntegratedFlux"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.Spergel.calculateIntegratedFlux" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the integrated flux out to a given radius, r</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="real-galaxy">
<h2>“Real” Galaxy<a class="headerlink" href="#real-galaxy" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="galsim.RealGalaxy">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">RealGalaxy</code><span class="sig-paren">(</span><em class="sig-param">real_galaxy_catalog</em>, <em class="sig-param">index=None</em>, <em class="sig-param">id=None</em>, <em class="sig-param">random=False</em>, <em class="sig-param">rng=None</em>, <em class="sig-param">x_interpolant=None</em>, <em class="sig-param">k_interpolant=None</em>, <em class="sig-param">flux=None</em>, <em class="sig-param">flux_rescale=None</em>, <em class="sig-param">pad_factor=4</em>, <em class="sig-param">noise_pad_size=0</em>, <em class="sig-param">area_norm=1.0</em>, <em class="sig-param">gsparams=None</em>, <em class="sig-param">logger=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxy" title="Permalink to this definition">¶</a></dt>
<dd><p>A class describing real galaxies from some training dataset.  Its underlying implementation
uses a Convolution instance of an InterpolatedImage (for the observed galaxy) with a
Deconvolution of another InterpolatedImage (for the PSF).</p>
<p>This class uses a catalog describing galaxies in some training data (for more details, see the
RealGalaxyCatalog documentation) to read in data about realistic galaxies that can be used for
simulations based on those galaxies.  Also included in the class is additional information that
might be needed to make or interpret the simulations, e.g., the noise properties of the training
data.  Users who wish to draw RealGalaxies that have well-defined flux scalings in various
passbands, and/or parametric representations, should use the COSMOSGalaxy class.</p>
<p>Because RealGalaxy involves a Deconvolution, <code class="docutils literal notranslate"><span class="pre">method</span> <span class="pre">=</span> <span class="pre">'phot'</span></code> is unavailable for the
drawImage() function.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">real_galaxy</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">RealGalaxy</span><span class="p">(</span><span class="n">real_galaxy_catalog</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">random</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">rng</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x_interpolant</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">k_interpolant</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">flux</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pad_factor</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">noise_pad_size</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">gsparams</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>This initializes <code class="docutils literal notranslate"><span class="pre">real_galaxy</span></code> with three InterpolatedImage objects (one for the deconvolved
galaxy, and saved versions of the original HST image and PSF). Note that there are multiple
keywords for choosing a galaxy; exactly one must be set.</p>
<p>Note that tests suggest that for optimal balance between accuracy and speed, <code class="docutils literal notranslate"><span class="pre">k_interpolant</span></code>
and <code class="docutils literal notranslate"><span class="pre">pad_factor</span></code> should be kept at their default values.  The user should be aware that
significant inaccuracy can result from using other combinations of these parameters; more
details can be found in <a class="reference external" href="http://arxiv.org/abs/1401.2636">http://arxiv.org/abs/1401.2636</a>, especially table 1, and in comment
<a class="reference external" href="https://github.com/GalSim-developers/GalSim/issues/389#issuecomment-26166621">https://github.com/GalSim-developers/GalSim/issues/389#issuecomment-26166621</a> and the following
comments.</p>
<p>If you don’t set a flux, the flux of the returned object will be the flux of the original
HST data, scaled to correspond to a 1 second HST exposure (though see the <code class="docutils literal notranslate"><span class="pre">area_norm</span></code>
parameter below, and also caveats related to using the <code class="docutils literal notranslate"><span class="pre">flux</span></code> parameter).  If you want a flux
appropriate for a longer exposure, or for a telescope with a different collecting area than HST,
you can either renormalize the object with the <code class="docutils literal notranslate"><span class="pre">flux_rescale</span></code> parameter, or by using the
<code class="docutils literal notranslate"><span class="pre">exptime</span></code> and <code class="docutils literal notranslate"><span class="pre">area</span></code> parameters to <code class="docutils literal notranslate"><span class="pre">drawImage</span></code>.</p>
<p>Note that RealGalaxy objects use arcsec for the units of their linear dimension.  If you
are using a different unit for other things (the PSF, WCS, etc.), then you should dilate
the resulting object with <code class="docutils literal notranslate"><span class="pre">gal.dilate(galsim.arcsec</span> <span class="pre">/</span> <span class="pre">scale_unit)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>real_galaxy_catalog</strong> – A RealGalaxyCatalog object with basic information about where to
find the data, etc.</p></li>
<li><p><strong>index</strong> – Index of the desired galaxy in the catalog. [One of <code class="docutils literal notranslate"><span class="pre">index</span></code>,
<code class="docutils literal notranslate"><span class="pre">id</span></code>, or <code class="docutils literal notranslate"><span class="pre">random</span></code> is required.]</p></li>
<li><p><strong>id</strong> – Object ID for the desired galaxy in the catalog. [One of <code class="docutils literal notranslate"><span class="pre">index</span></code>,
<code class="docutils literal notranslate"><span class="pre">id</span></code>, or <code class="docutils literal notranslate"><span class="pre">random</span></code> is required.]</p></li>
<li><p><strong>random</strong> – If True, then select a random galaxy from the catalog.  If the
catalog has a ‘weight’ associated with it to allow for correction of
selection effects in which galaxies were included, the ‘weight’
factor is used to remove those selection effects rather than
selecting a completely random object.
[One of <code class="docutils literal notranslate"><span class="pre">index</span></code>, <code class="docutils literal notranslate"><span class="pre">id</span></code>, or <code class="docutils literal notranslate"><span class="pre">random</span></code> is required.]</p></li>
<li><p><strong>rng</strong> – A random number generator to use for selecting a random galaxy
(may be any kind of BaseDeviate or None) and to use in generating
any noise field when padding.  This user-input random number
generator takes precedence over any stored within a user-input
CorrelatedNoise instance (see <code class="docutils literal notranslate"><span class="pre">noise_pad</span></code> parameter below).
[default: None]</p></li>
<li><p><strong>x_interpolant</strong> – Either an Interpolant instance or a string indicating which
real-space interpolant should be used.  Options are ‘nearest’,
‘sinc’, ‘linear’, ‘cubic’, ‘quintic’, or ‘lanczosN’ where N should
be the integer order to use. [default: galsim.Quintic()]</p></li>
<li><p><strong>k_interpolant</strong> – Either an Interpolant instance or a string indicating which k-space
interpolant should be used.  Options are ‘nearest’, ‘sinc’,
‘linear’, ‘cubic’, ‘quintic’, or ‘lanczosN’ where N should be the
integer order to use.  We strongly recommend leaving this parameter
at its default value; see text above for details.
[default: galsim.Quintic()]</p></li>
<li><p><strong>flux</strong> – Total flux, if None then original flux in image is adopted without
change.  Note that, technically, this parameter sets the flux of the
postage stamp image and not the flux of the contained galaxy.
These two values will be strongly correlated when the signal-to-
noise ratio of the galaxy is large, but may be considerably
different if the flux of the galaxy is small with respect to the
noise variations in the postage stamp.  To avoid complications with
faint galaxies, consider using the flux_rescale parameter.
[default: None]</p></li>
<li><p><strong>flux_rescale</strong> – Flux rescaling factor; if None, then no rescaling is done.  Either
<code class="docutils literal notranslate"><span class="pre">flux</span></code> or <code class="docutils literal notranslate"><span class="pre">flux_rescale</span></code> may be set, but not both.
[default: None]</p></li>
<li><p><strong>pad_factor</strong> – Factor by which to pad the Image when creating the
InterpolatedImage.  We strongly recommend leaving this parameter
at its default value; see text above for details.  [default: 4]</p></li>
<li><p><strong>noise_pad_size</strong> – If provided, the image will be padded out to this size (in arcsec)
with the noise specified in the real galaxy catalog. This is
important if you are planning to whiten the resulting image.  You
should make sure that the padded image is larger than the postage
stamp onto which you are drawing this object.
[default: None]</p></li>
<li><p><strong>area_norm</strong> – Area in cm^2 by which to normalize the flux of the returned object.
When area_norm=1 (the default), drawing with <code class="docutils literal notranslate"><span class="pre">drawImage</span></code> keywords
exptime=1 and area=1 will simulate an image with the appropriate
number of counts for a 1 second exposure with the original
telescope/camera (e.g., with HST when using the COSMOS catalog).
If you would rather explicitly specify the collecting area of the
telescope when using <code class="docutils literal notranslate"><span class="pre">drawImage</span></code> with a <code class="docutils literal notranslate"><span class="pre">RealGalaxy</span></code>, then you
should set area_norm equal to the collecting area of the source
catalog telescope when creating the <code class="docutils literal notranslate"><span class="pre">RealGalaxy</span></code> (e.g.,
area_norm=45238.93416 for HST).  [default: 1]</p></li>
<li><p><strong>gsparams</strong> – An optional GSParams argument.  See the docstring for GSParams for
details. [default: None]</p></li>
<li><p><strong>logger</strong> – A logger object for output of progress statements if the user wants
them.  [default: None]</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="galsim.RealGalaxy.makeFromImage">
<em class="property">classmethod </em><code class="sig-name descname">makeFromImage</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">PSF</em>, <em class="sig-param">xi</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxy.makeFromImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxy.makeFromImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a RealGalaxy directly from image, PSF, and noise description.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – Image of the galaxy you want to simulate.</p></li>
<li><p><strong>PSF</strong> – GSObject representing the PSF of the galaxy image.  Note that this PSF
should include the response of the pixel convolution.</p></li>
<li><p><strong>xi</strong> – CorrelatedNoise or UncorrelatedNoise object characterizing the noise in the
input image.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="galsim.RealGalaxy.withGSParams">
<code class="sig-name descname">withGSParams</code><span class="sig-paren">(</span><em class="sig-param">gsparams</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxy.withGSParams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxy.withGSParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a version of the current object with the given gsparams</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="galsim.RealGalaxyCatalog">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">RealGalaxyCatalog</code><span class="sig-paren">(</span><em class="sig-param">file_name=None</em>, <em class="sig-param">sample=None</em>, <em class="sig-param">dir=None</em>, <em class="sig-param">preload=False</em>, <em class="sig-param">logger=None</em>, <em class="sig-param">_nobjects_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxyCatalog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxyCatalog" title="Permalink to this definition">¶</a></dt>
<dd><p>Class containing a catalog with information about real galaxy training data.</p>
<p>The RealGalaxyCatalog class reads in and stores information about a specific training sample of
realistic galaxies. We assume that all files containing the images (galaxies and PSFs) live in
one directory; they could be individual files, or multiple HDUs of the same file.  Currently
there is no functionality that lets this be a FITS data cube, because we assume that the object
postage stamps will in general need to be different sizes depending on the galaxy size.</p>
<p>Note that when simulating galaxies based on HST but using either realistic or parametric galaxy
models, the COSMOSCatalog class may be more useful.  It allows the imposition of selection
criteria and other subtleties that are more difficult to impose with RealGalaxyCatalog.</p>
<p>While you could create your own catalog to use with this class, the typical use cases would
be to use one of the catalogs that we have created and distributed.  There are three such
catalogs currently, which can be use with one of the following initializations:</p>
<ol class="arabic">
<li><p>A small example catalog is distributed with the GalSim distribution.  This catalog only
has 100 galaxies, so it is not terribly useful as a representative galaxy population.
But for simplistic use cases, it might be sufficient.  We use it for our unit tests and
in some of the demo scripts (demo6, demo10, and demo11).  To use this catalog, you would
initialize with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rgc</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">RealGalaxyCatalog</span><span class="p">(</span><span class="s1">&#39;real_galaxy_catalog_23.5_example.fits&#39;</span><span class="p">,</span>
<span class="go">                                   dir=&#39;path/to/GalSim/examples/data&#39;)</span>
</pre></div>
</div>
</li>
<li><p>There are two larger catalogs based on HST observations of the COSMOS field with around
26,000 and 56,000 galaxies each with a limiting magnitude of F814W=23.5.  (The former is
a subset of the latter.) For information about how to download these catalogs, see the
RealGalaxy Data Download Page on the GalSim Wiki:</p>
<p><a class="reference external" href="https://github.com/GalSim-developers/GalSim/wiki/RealGalaxy%20Data">https://github.com/GalSim-developers/GalSim/wiki/RealGalaxy%20Data</a></p>
<p>Be warned that the catalogs are quite large.  The larger one is around 11 GB after unpacking
the tarball.  To use one of these catalogs, you would initialize with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rgc</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">RealGalaxyCatalog</span><span class="p">(</span><span class="s1">&#39;real_galaxy_catalog_23.5.fits&#39;</span><span class="p">,</span>
<span class="go">                                   dir=&#39;path/to/download/directory&#39;)</span>
</pre></div>
</div>
</li>
<li><p>There is a catalog containing a random subsample of the HST COSMOS images with a limiting
magnitude of F814W=25.2.  More information about downloading these catalogs can be found on
the RealGalaxy Data Download page linked above.</p></li>
<li><p>Finally, we provide a program that will download the large COSMOS sample for you and
put it in the $PREFIX/share/galsim directory of your installation path.  The program is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">galsim_download_cosmos</span>
</pre></div>
</div>
<p>which gets installed in the $PREFIX/bin directory when you install GalSim.  If you use
this program to download the COSMOS catalog, then you can use it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rgc</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">RealGalaxyCatalog</span><span class="p">()</span>
</pre></div>
</div>
<p>GalSim knows the location of the installation share directory, so it will automatically
look for it there.</p>
</li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> – The file containing the catalog. [default: None, which will look for the
F814W&lt;25.2 COSMOS catalog in $PREFIX/share/galsim.  It will raise an
exception if the catalog is not there telling you to run
galsim_download_cosmos.]</p></li>
<li><p><strong>sample</strong> – A keyword argument that can be used to specify the sample to use, i.e.,
“23.5” or “25.2”.  At most one of <code class="docutils literal notranslate"><span class="pre">file_name</span></code> and <code class="docutils literal notranslate"><span class="pre">sample</span></code> should be
specified.
[default: None, which results in the same default as <code class="docutils literal notranslate"><span class="pre">file_name=None</span></code>.]</p></li>
<li><p><strong>dir</strong> – The directory containing the catalog, image, and noise files, or symlinks to
them. [default: None]</p></li>
<li><p><strong>preload</strong> – Whether to preload the header information.  If <code class="docutils literal notranslate"><span class="pre">preload=True</span></code>, the bulk of
the I/O time is in the constructor.  If <code class="docutils literal notranslate"><span class="pre">preload=False</span></code>, there is
approximately the same total I/O time (assuming you eventually use most of
the image files referenced in the catalog), but it is spread over the
various calls to getGalImage() and getPSFImage().  [default: False]</p></li>
<li><p><strong>logger</strong> – An optional logger object to log progress. [default: None]</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="galsim.RealGalaxyCatalog.getBandpass">
<code class="sig-name descname">getBandpass</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxyCatalog.getBandpass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxyCatalog.getBandpass" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Bandpass object for the catalog.</p>
</dd></dl>

<dl class="method">
<dt id="galsim.RealGalaxyCatalog.getGalImage">
<code class="sig-name descname">getGalImage</code><span class="sig-paren">(</span><em class="sig-param">i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxyCatalog.getGalImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxyCatalog.getGalImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the galaxy at index <code class="docutils literal notranslate"><span class="pre">i</span></code> as an Image object.</p>
</dd></dl>

<dl class="method">
<dt id="galsim.RealGalaxyCatalog.getIndexForID">
<code class="sig-name descname">getIndexForID</code><span class="sig-paren">(</span><em class="sig-param">id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxyCatalog.getIndexForID"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxyCatalog.getIndexForID" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal function to find which index number corresponds to the value ID in the ident
field.</p>
</dd></dl>

<dl class="method">
<dt id="galsim.RealGalaxyCatalog.getNoise">
<code class="sig-name descname">getNoise</code><span class="sig-paren">(</span><em class="sig-param">i</em>, <em class="sig-param">rng=None</em>, <em class="sig-param">gsparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxyCatalog.getNoise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxyCatalog.getNoise" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the noise correlation function at index <code class="docutils literal notranslate"><span class="pre">i</span></code> as a CorrelatedNoise object.
Note: the return value from this function is not picklable, so this cannot be used
across processes.</p>
</dd></dl>

<dl class="method">
<dt id="galsim.RealGalaxyCatalog.getNoiseProperties">
<code class="sig-name descname">getNoiseProperties</code><span class="sig-paren">(</span><em class="sig-param">i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxyCatalog.getNoiseProperties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxyCatalog.getNoiseProperties" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the components needed to make the noise correlation function at index <code class="docutils literal notranslate"><span class="pre">i</span></code>.
Specifically, the noise image (or None), the pixel_scale, and the noise variance,
as a tuple (im, scale, var).</p>
</dd></dl>

<dl class="method">
<dt id="galsim.RealGalaxyCatalog.getPSF">
<code class="sig-name descname">getPSF</code><span class="sig-paren">(</span><em class="sig-param">i</em>, <em class="sig-param">x_interpolant=None</em>, <em class="sig-param">k_interpolant=None</em>, <em class="sig-param">gsparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxyCatalog.getPSF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxyCatalog.getPSF" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the PSF at index <code class="docutils literal notranslate"><span class="pre">i</span></code> as a GSObject.</p>
</dd></dl>

<dl class="method">
<dt id="galsim.RealGalaxyCatalog.getPSFImage">
<code class="sig-name descname">getPSFImage</code><span class="sig-paren">(</span><em class="sig-param">i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxyCatalog.getPSFImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxyCatalog.getPSFImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the PSF at index <code class="docutils literal notranslate"><span class="pre">i</span></code> as an Image object.</p>
</dd></dl>

<dl class="method">
<dt id="galsim.RealGalaxyCatalog.preload">
<code class="sig-name descname">preload</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/real.html#RealGalaxyCatalog.preload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RealGalaxyCatalog.preload" title="Permalink to this definition">¶</a></dt>
<dd><p>Preload the files into memory.</p>
<p>There are memory implications to this, so we don’t do this by default.  However, it can be
a big speedup if memory isn’t an issue.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="galsim.COSMOSCatalog">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">COSMOSCatalog</code><span class="sig-paren">(</span><em class="sig-param">file_name=None</em>, <em class="sig-param">sample=None</em>, <em class="sig-param">dir=None</em>, <em class="sig-param">preload=False</em>, <em class="sig-param">use_real=True</em>, <em class="sig-param">exclusion_level='marginal'</em>, <em class="sig-param">min_hlr=0</em>, <em class="sig-param">max_hlr=0.0</em>, <em class="sig-param">min_flux=0.0</em>, <em class="sig-param">max_flux=0.0</em>, <em class="sig-param">_nobjects_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/scene.html#COSMOSCatalog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.COSMOSCatalog" title="Permalink to this definition">¶</a></dt>
<dd><p>A class representing a random subsample of galaxies from the COSMOS sample with F814W&lt;25.2
(default for GalSim v1.4), or alternatively the entire sample with F814W&lt;23.5 (which was the
default for GalSim v1.3).</p>
<p>Depending on the keyword arguments, particularly <code class="docutils literal notranslate"><span class="pre">use_real</span></code>, the catalog will either have
information about real galaxies, and/or parametric ones.  To use this with either type of
galaxies, you need to get the COSMOS datasets in the format that GalSim recognizes; see</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/GalSim-developers/GalSim/wiki/RealGalaxy-Data">https://github.com/GalSim-developers/GalSim/wiki/RealGalaxy-Data</a></p>
</div></blockquote>
<p>option (1) for more information.  Note that if you want to make real galaxies you need to
download and store the full tarball with all galaxy images, whereas if you want to make
parametric galaxies you only need the catalog real_galaxy_catalog_25.2_fits.fits (and the
selection file real_galaxy_catalog_25.2_selection.fits if you want to place cuts on the
postage stamp quality) and can delete the galaxy and PSF image files.</p>
<p>Finally, we provide a program that will download the large COSMOS sample for you and
put it in the $PREFIX/share/galsim directory of your installation path.  The program is</p>
<blockquote>
<div><p>galsim_download_cosmos</p>
</div></blockquote>
<p>which gets installed in the $PREFIX/bin directory when you install GalSim.  If you use
this program to download the COSMOS catalog, then you can use it with</p>
<blockquote>
<div><p>cat = galsim.COSMOSCatalog()</p>
</div></blockquote>
<p>GalSim knows the location of the installation share directory, so it will automatically
look for it there.</p>
<p>In addition to the option of specifying catalog names, this class also accepts a keyword
argument <code class="docutils literal notranslate"><span class="pre">sample</span></code> that can be used to switch between the samples with limiting magnitudes of
23.5 and 25.2.</p>
<p>After getting the catalogs, there is a method makeGalaxy() that can make a GSObject
corresponding to any chosen galaxy in the catalog (whether real or parametric).  See
help(galsim.COSMOSCatalog.makeGalaxy) for more information.  As an interesting application and
example of the usage of these routines, consider the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">im_size</span> <span class="o">=</span> <span class="mi">64</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pix_scale</span> <span class="o">=</span> <span class="mf">0.05</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bp_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">galsim</span><span class="o">.</span><span class="n">meta_data</span><span class="o">.</span><span class="n">share_dir</span><span class="p">,</span> <span class="s1">&#39;wfc_F814W.dat.gz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bandpass</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Bandpass</span><span class="p">(</span><span class="n">bp_file</span><span class="p">,</span> <span class="n">wave_type</span><span class="o">=</span><span class="s1">&#39;ang&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">thin</span><span class="p">()</span><span class="o">.</span><span class="n">withZeropoint</span><span class="p">(</span><span class="mf">25.94</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cosmos_cat</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">COSMOSCatalog</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">psf</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">OpticalPSF</span><span class="p">(</span><span class="n">diam</span><span class="o">=</span><span class="mf">2.4</span><span class="p">,</span> <span class="n">lam</span><span class="o">=</span><span class="mf">1000.</span><span class="p">)</span> <span class="c1"># bigger than HST F814W PSF.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">real_gal_list</span> <span class="o">=</span> <span class="n">cosmos_cat</span><span class="o">.</span><span class="n">makeGalaxy</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">gal_type</span><span class="o">=</span><span class="s1">&#39;real&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                      <span class="n">noise_pad_size</span><span class="o">=</span><span class="n">im_size</span><span class="o">*</span><span class="n">pix_scale</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">param_gal_list</span> <span class="o">=</span> <span class="n">cosmos_cat</span><span class="o">.</span><span class="n">makeGalaxy</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">gal_type</span><span class="o">=</span><span class="s1">&#39;parametric&#39;</span><span class="p">,</span> <span class="n">chromatic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">real_gal</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Convolve</span><span class="p">(</span><span class="n">real_gal_list</span><span class="p">[</span><span class="n">ind</span><span class="p">],</span> <span class="n">psf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">param_gal</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Convolve</span><span class="p">(</span><span class="n">param_gal_list</span><span class="p">[</span><span class="n">ind</span><span class="p">],</span> <span class="n">psf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">im_real</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">im_size</span><span class="p">,</span> <span class="n">im_size</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">im_param</span> <span class="o">=</span> <span class="n">galsim</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">im_size</span><span class="p">,</span> <span class="n">im_size</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">real_gal</span><span class="o">.</span><span class="n">drawImage</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">im_real</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">pix_scale</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">param_gal</span><span class="o">.</span><span class="n">drawImage</span><span class="p">(</span><span class="n">bandpass</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">im_param</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">pix_scale</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">im_real</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;im_real_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.fits&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">im_param</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;im_param_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.fits&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This code snippet will draw images of the first 10 entries in the COSMOS catalog, at slightly
lower resolution than in COSMOS, with a real image and its parametric representation for each of
those objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> – The file containing the catalog. [default: None, which will look for the
F814W&lt;25.2 COSMOS catalog in $PREFIX/share/galsim.  It will raise an
exception if the catalog is not there telling you to run
galsim_download_cosmos.]</p></li>
<li><p><strong>sample</strong> – A keyword argument that can be used to specify the sample to use, i.e.,
“23.5” or “25.2”.  At most one of <code class="docutils literal notranslate"><span class="pre">file_name</span></code> and <code class="docutils literal notranslate"><span class="pre">sample</span></code> should be
specified.  [default: None, which results in the same default as
<code class="docutils literal notranslate"><span class="pre">file_name=None</span></code>.]</p></li>
<li><p><strong>dir</strong> – The directory with the catalog file and, if making realistic galaxies,
the image and noise files (or symlinks to them). [default: None, which
will look in $PREFIX/share/galsim.]</p></li>
<li><p><strong>preload</strong> – Keyword that is only used for real galaxies, not parametric ones, to
choose whether to preload the header information.  If <code class="docutils literal notranslate"><span class="pre">preload=True</span></code>,
the bulk of the I/O time is in the constructor.  If <code class="docutils literal notranslate"><span class="pre">preload=False</span></code>,
there is approximately the same total I/O time (assuming you eventually
use most of the image files referenced in the catalog), but it is spread
over the calls to makeGalaxy().  [default: False]</p></li>
<li><p><strong>use_real</strong> – Enable the use of realistic galaxies?  [default: True]
If this parameter is False, then <code class="docutils literal notranslate"><span class="pre">makeGalaxy(gal_type='real')</span></code> will
not be allowed, and there will be a (modest) decrease in RAM and time
spent on I/O when initializing the COSMOSCatalog. If the real
catalog is not available for some reason, it will still be possible to
make parametric images.</p></li>
<li><p><strong>exclusion_level</strong> – <p>Level of additional cuts to make on the galaxies based on the quality
of postage stamp definition and/or parametric fit quality [beyond the
minimal cuts imposed when making the catalog - see Mandelbaum et
al. (2012, MNRAS, 420, 1518) for details].  Options:</p>
<ul>
<li><p>”none”: No cuts.</p></li>
<li><p>”bad_stamp”: Apply cuts to eliminate galaxies that have failures in
postage stamp definition.  These cuts may also eliminate a small
subset of the good postage stamps as well.</p></li>
<li><p>”bad_fits”: Apply cuts to eliminate galaxies that have failures in the
parametric fits.  These cuts may also eliminate a small
subset of the good parametric fits as well.</p></li>
<li><p>”marginal”: Apply the above cuts, plus ones that eliminate some more
marginal cases.</p></li>
</ul>
<p>[default: “marginal”]</p>
</p></li>
<li><p><strong>min_hlr</strong> – Exclude galaxies whose fitted half-light radius is smaller than this
value (in arcsec).  [default: 0, meaning no limit]</p></li>
<li><p><strong>max_hlr</strong> – Exclude galaxies whose fitted half-light radius is larger than this
value (in arcsec).  [default: 0, meaning no limit]</p></li>
<li><p><strong>min_flux</strong> – Exclude galaxies whose fitted flux is smaller than this value.
[default: 0, meaning no limit]</p></li>
<li><p><strong>max_flux</strong> – Exclude galaxies whose fitted flux is larger than this value.
[default: 0, meaning no limit]</p></li>
</ul>
</dd>
</dl>
<p>After construction, the following attributes are available:</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><p><strong>nobjects</strong> – The number of objects in the catalog</p>
</dd>
</dl>
<dl class="method">
<dt id="galsim.COSMOSCatalog.canMakeReal">
<code class="sig-name descname">canMakeReal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/scene.html#COSMOSCatalog.canMakeReal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.COSMOSCatalog.canMakeReal" title="Permalink to this definition">¶</a></dt>
<dd><p>Is it permissible to call makeGalaxy with gal_type=’real’?</p>
</dd></dl>

<dl class="method">
<dt id="galsim.COSMOSCatalog.getParametricRecord">
<code class="sig-name descname">getParametricRecord</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/scene.html#COSMOSCatalog.getParametricRecord"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.COSMOSCatalog.getParametricRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parametric record for a given index</p>
</dd></dl>

<dl class="method">
<dt id="galsim.COSMOSCatalog.getRealParams">
<code class="sig-name descname">getRealParams</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/scene.html#COSMOSCatalog.getRealParams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.COSMOSCatalog.getRealParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameters needed to make a RealGalaxy for a given index.</p>
</dd></dl>

<dl class="method">
<dt id="galsim.COSMOSCatalog.makeGalaxy">
<code class="sig-name descname">makeGalaxy</code><span class="sig-paren">(</span><em class="sig-param">index=None</em>, <em class="sig-param">gal_type=None</em>, <em class="sig-param">chromatic=False</em>, <em class="sig-param">noise_pad_size=5</em>, <em class="sig-param">deep=False</em>, <em class="sig-param">sersic_prec=0.05</em>, <em class="sig-param">rng=None</em>, <em class="sig-param">n_random=None</em>, <em class="sig-param">gsparams=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/scene.html#COSMOSCatalog.makeGalaxy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.COSMOSCatalog.makeGalaxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Routine to construct GSObjects corresponding to the catalog entry with a particular index
or indices.</p>
<p>The flux of the galaxy corresponds to a 1 second exposure time with the Hubble Space
Telescope.  Users who wish to simulate F814W images with a different telescope and an
exposure time longer than 1 second should multiply by that exposure time, and by the square
of the ratio of the effective diameter of their telescope compared to that of HST.
(Effective diameter may differ from the actual diameter if there is significant
obscuration.)  See demo11.py for an example that explicitly takes this normalization into
account.</p>
<p>Due to the adopted flux normalization, drawing into an image with the COSMOS bandpass,
zeropoint of 25.94, and pixel scale should give the right pixel values to mimic the actual
COSMOS science images.  The COSMOS science images that we use are normalized to a count rate
of 1 second, which is why there is no need to rescale to account for the COSMOS exposure
time.</p>
<p>There is an option to make chromatic objects (<code class="docutils literal notranslate"><span class="pre">chromatic=True</span></code>); however, it is important
to bear in mind that we do not actually have spatially-resolved color information for these
galaxies, so this keyword can only be True if we are using parametric galaxies.  Even then,
we simply do the most arbitrary thing possible, which is to assign bulges an elliptical
SED, disks a disk-like SED, and Sersic galaxies with intermediate values of n some
intermediate SED.  We assume that the photometric redshift is the correct redshift for
these galaxies (which is a good assumption for COSMOS 30-band photo-z for these bright
galaxies).  For the given SED and redshift, we then normalize to give the right (observed)
flux in F814W.  Note that for a mock “deep” sample, the redshift distributions of the
galaxies would be modified, which is not included here.</p>
<p>For this chromatic option, it is still the case that the output flux normalization is
appropriate for the HST effective telescope diameter and a 1 second exposure time, so users
who are simulating another scenario should account for this.</p>
<p>Note that the returned objects use arcsec for the units of their linear dimension.  If you
are using a different unit for other things (the PSF, WCS, etc.), then you should dilate
the resulting object with <code class="docutils literal notranslate"><span class="pre">gal.dilate(galsim.arcsec</span> <span class="pre">/</span> <span class="pre">scale_unit)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> – Index of the desired galaxy in the catalog for which a GSObject
should be constructed.  You may also provide a list or array of
indices, in which case a list of objects is returned. If None,
then a random galaxy (or more: see n_random kwarg) is chosen,
correcting for catalog-level selection effects if weights are
available. [default: None]</p></li>
<li><p><strong>gal_type</strong> – Either ‘real’ or ‘parametric’.  This determines which kind of
galaxy model is made. [If catalog was loaded with <code class="docutils literal notranslate"><span class="pre">use_real=False</span></code>,
then this defaults to ‘parametric’, and in fact ‘real’ is
not allowed.  If catalog was loaded with <code class="docutils literal notranslate"><span class="pre">use_real=True</span></code>, then
this defaults to ‘real’.]</p></li>
<li><p><strong>chromatic</strong> – Make this a chromatic object, or not?  [default: False]</p></li>
<li><p><strong>noise_pad_size</strong> – For realistic galaxies, the size of region to pad with noise,
in arcsec.  [default: 5, an arbitrary, but not completely
ridiculous choice.]</p></li>
<li><p><strong>deep</strong> – Modify fluxes and sizes of galaxies from the F814W&lt;23.5 sample in
order to roughly simulate an F814W&lt;25 sample but with higher S/N, as
in GREAT3? [default: False]  Note that this keyword will be ignored
(except for issuing a warning) if the input catalog already
represents the F814W&lt;25.2 sample.</p></li>
<li><p><strong>sersic_prec</strong> – The desired precision on the Sersic index n in parametric galaxies.
GalSim is significantly faster if it gets a smallish number of
Sersic values, so it can cache some of the calculations and use
them again the next time it gets a galaxy with the same index.
If <code class="docutils literal notranslate"><span class="pre">sersic_prec</span></code> is 0.0, then use the exact value of index n from
the catalog.  But if it is &gt;0, then round the index to that
precision.  [default: 0.05]</p></li>
<li><p><strong>rng</strong> – A random number generator to use for selecting a random galaxy
(may be any kind of BaseDeviate or None) and to use in generating
any noise field when padding.  [default: None]</p></li>
<li><p><strong>n_random</strong> – The number of random galaxies to build, if ‘index’ is None.
[default: 1]</p></li>
<li><p><strong>gsparams</strong> – An optional GSParams argument.  See the docstring for GSParams for
details. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Either a GSObject or a ChromaticObject depending on the value of <code class="docutils literal notranslate"><span class="pre">chromatic</span></code>,
or a list of them if <code class="docutils literal notranslate"><span class="pre">index</span></code> is an iterable.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="galsim.COSMOSCatalog.selectRandomIndex">
<code class="sig-name descname">selectRandomIndex</code><span class="sig-paren">(</span><em class="sig-param">n_random=1</em>, <em class="sig-param">rng=None</em>, <em class="sig-param">_n_rng_calls=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/scene.html#COSMOSCatalog.selectRandomIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.COSMOSCatalog.selectRandomIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Routine to select random indices out of the catalog.  This routine does a weighted random
selection with replacement (i.e., there is no guarantee of uniqueness of the selected
indices).  Weighting uses the weight factors available in the catalog, if any; these weights
are typically meant to remove any selection effects in the catalog creation process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_random</strong> – Number of random indices to return. [default: 1]</p></li>
<li><p><strong>rng</strong> – A random number generator to use for selecting a random galaxy
(may be any kind of BaseDeviate or None). [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A single index if n_random==1 or a NumPy array containing the randomly-selected
indices if n_random&gt;1.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="knots-defined-by-a-random-walk">
<h2>Knots defined by a “random walk”<a class="headerlink" href="#knots-defined-by-a-random-walk" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="galsim.RandomWalk">
<em class="property">class </em><code class="sig-prename descclassname">galsim.</code><code class="sig-name descname">RandomWalk</code><span class="sig-paren">(</span><em class="sig-param">npoints</em>, <em class="sig-param">**kw</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/randwalk.html#RandomWalk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RandomWalk" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for generating a set of point sources distributed using a random
walk of points drawn from a specified distribution.</p>
<p>Uses of this profile include representing an “irregular” galaxy, or
adding this profile to an Exponential to represent knots of star formation.</p>
<p>Random walk profiles have “shape noise” that depends on the number of point
sources used.  For example, using the default Gaussian distribution, with
100 points, the shape noise is g~0.05, and this will decrease as more
points are added.  The profile can be sheared to give additional
ellipticity, for example to follow that of an associated disk.</p>
<p>We use the analytic approximation of an infinite number of steps, which is
a good approximation even if the desired number of steps were less than 10.</p>
<p>The requested half light radius (hlr) should be thought of as a rough
value.  With a finite number point sources the actual realized hlr will be
noisy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>npoints</strong> – Number of point sources to generate.</p></li>
<li><p><strong>half_light_radius</strong> – Optional half light radius of the distribution of points.  This value
is used for a Gaussian distribution if an explicit profile is not sent.
This is the mean half light radius produced by an infinite number of
points.  A single instance will be noisy.  [default None]</p></li>
<li><p><strong>flux</strong> – Optional total flux in all point sources.  This value is used for a
Gaussian distribution if an explicit profile is not sent. Defaults to
None if profile is sent, otherwise 1.  [default: 1]</p></li>
<li><p><strong>profile</strong> – Optional profile to use for drawing points.  If a profile is sent, the
half_light_radius and flux keywords are ignored.  [default: None]</p></li>
<li><p><strong>rng</strong> – Optional random number generator. Can be any galsim.BaseDeviate.  If
None, the rng is created internally.  [default: None]</p></li>
<li><p><strong>gsparams</strong> – Optional GSParams for the objects representing each point source.
[default: None]</p></li>
</ul>
</dd>
</dl>
<p>This class inherits from galsim.Sum. Additional methods are</p>
<dl class="method">
<dt id="galsim.RandomWalk.calculateHLR">
<code class="sig-name descname">calculateHLR</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/randwalk.html#RandomWalk.calculateHLR"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galsim.RandomWalk.calculateHLR" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the actual half light radius of the generated points</p>
</dd></dl>

<p>There are also “getters”,  implemented as read-only properties</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>npoints</strong> – The number of random walk points</p></li>
<li><p><strong>input_half_light_radius</strong> – The input half_light_radius</p></li>
<li><p><strong>flux</strong> – The flux</p></li>
<li><p><strong>points</strong> – The array of x,y offsets used to create the point sources</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The algorithm is a modified version of that presented in
<a class="reference external" href="https://arxiv.org/abs/1312.5514v3">https://arxiv.org/abs/1312.5514v3</a></p>
<p>Modifications are:</p>
<ul class="simple">
<li><p>There is no outer cutoff to how far a point can wander</p></li>
<li><p>We use the approximation of an infinite number of steps.</p></li>
</ul>
</div>
<dl class="method">
<dt>
<code class="sig-name descname">calculateHLR</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/galsim/randwalk.html#RandomWalk.calculateHLR"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>calculate the half-light radius of the generated points</p>
</dd></dl>

<dl class="method">
<dt id="galsim.RandomWalk.input_half_light_radius">
<em class="property">property </em><code class="sig-name descname">input_half_light_radius</code><a class="headerlink" href="#galsim.RandomWalk.input_half_light_radius" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the input half light radius (HLR).</p>
<p>Note the input HLR is not necessarily the realized HLR,
due to the finite number of points used in the profile.</p>
<p>If a profile is sent, and that profile is a Transformation object (e.g.
it has been sheared, its flux set, etc), then this value will be None.</p>
<p>You can get the <em>calculated</em> half light radius using the calculateHLR
method.  That value will be valid in all cases.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="simple.html" class="btn btn-neutral float-right" title="Simple Profiles" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="phase_psf.html" class="btn btn-neutral float-left" title="Phase-screen PSFs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, GalSim-developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>