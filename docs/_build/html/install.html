

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation Instructions &mdash; GalSim 2.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Images and Related Concepts" href="image.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GalSim
          

          
          </a>

          
            
            
              <div class="version">
                2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation Instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-with-pip">Installing With Pip</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overall-summary">Overall summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-python-dependencies">Installing Python Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-fftw">Installing FFTW</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-fftw-yourself">Installing FFTW yourself</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-an-existing-installation-of-fftw">Using an existing installation of FFTW</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-fftw-with-conda">Installing FFTW with conda</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-fftw-with-apt-get">Installing FFTW with apt-get</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-fftw-with-fink">Installing FFTW with fink</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-fftw-with-macports">Installing FFTW with MacPorts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installing-eigen">Installing Eigen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-eigen-yourself">Installing Eigen yourself</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-an-existing-installation-of-eigen">Using an existing installation of Eigen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-eigen-with-conda">Installing Eigen with conda</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-eigen-with-apt-get">Installing Eigen with apt-get</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-eigen-with-fink">Installing Eigen with fink</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-eigen-with-macports">Installing Eigen with MacPorts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-eigency">Using eigency</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installing-with-conda">Installing With Conda</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-tests">Running tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-example-scripts">Running example scripts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installing-with-scons">Installing With SCons</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#software-required-before-building-galsim">Software required before building GalSim</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#python-2-7-3-4-3-5-or-3-6-series">Python (2.7, 3.4, 3.5, or 3.6 series)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scons">SCons</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fftw">FFTW</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tmv-version-0-72">TMV (version &gt;= 0.72)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boost-c">Boost C++</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-dependencies">Python dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installing-the-galsim-python-package">Installing the GalSim Python package</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-tests-and-installing-example-executables">Running tests and installing example executables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#platform-specific-notes">Platform-specific notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mac-osx">Mac OSX</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker">Docker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#more-scons-options">More SCons options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic-flags-about-the-c-compilation-default-values-in-parentheses">Basic flags about the C++ compilation (default values in parentheses)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flags-about-where-to-install-the-library-and-modules">Flags about where to install the library and modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flags-that-specify-where-to-look-for-external-libraries">Flags that specify where to look for external libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miscellaneous-flags">Miscellaneous flags</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="image.html">Images and Related Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="sb.html">Surface Brightness Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="wcs.html">World Coordinate Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">Noise and Random Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="chromatic.html">Wavelength-dependent Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="shear.html">Weak Lensing Shear</a></li>
<li class="toctree-l1"><a class="reference internal" href="coord.html">Angles and Coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Helper Functions and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">The Config Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="hsm.html">The HSM Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="des.html">The DES Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="wfirst.html">The WFIRST Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Revision History</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GalSim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installation Instructions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/install.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation-instructions">
<h1>Installation Instructions<a class="headerlink" href="#installation-instructions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing-with-pip">
<h2>Installing With Pip<a class="headerlink" href="#installing-with-pip" title="Permalink to this headline">¶</a></h2>
<p>System requirements: GalSim currently only supports Linux and Mac OSX.</p>
<div class="section" id="overall-summary">
<h3>Overall summary<a class="headerlink" href="#overall-summary" title="Permalink to this headline">¶</a></h3>
<p>GalSim is a python module that has much of its implementation in C++ for
improved computational efficiency.  GalSim supports both Python 2 and
Python 3.  It is regularly tested on Python versions (2.7, 3.5, 3.6).</p>
<p>The usual way to install GalSim is now (starting with version 2.0) simply:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">galsim</span>
</pre></div>
</div>
<p>which will install the latest official release of GalSim.</p>
<p>Note that you may need to use sudo with the above command if you are installing
into system directories.  If you do not have write privileges for the directory
it is trying to install into, you can use the –user flag to install into a
local directory instead.  (Normally something like $HOME/Library/Python/2.7
or $HOME/.local, depending on your system.)</p>
<p>This might fail if certain libraries are installed in non-standard locations.
In this case, add the paths for these libraries to both the LIBRARY_PATH and
LD_LIBRARY_PATH environmental variables before running pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export LIBRARY_PATH=$LIBARY_PATH:/path/to/lib:/other/path/to/lib
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/lib:/other/path/to/lib
</pre></div>
</div>
<p>If you would rather install from source (e.g. to work on a development branch),
you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">GalSim</span><span class="o">-</span><span class="n">developers</span><span class="o">/</span><span class="n">GalSim</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">GalSim</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>(again possibly with either sudo or –user).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you use Anaconda Python, you can use that to install most of the
requirements with their conda installer.  See <a class="reference internal" href="#installing-with-conda"><span class="std std-ref">Installing With Conda</span></a>
below.</p>
</div>
<p>Either of these installation methods should handle most of the required
dependencies for you if you do not have them already installed on your machine.
In particular, all of the python dependencies should be automatically installed
for you.  See section 2 below if you have trouble with any of these.</p>
<p>FFTW is not directly pip installable, so if the above installation fails,
you may need to install it separately. See section 3 below for more details
about how to do this.</p>
<p>Fianlly, a version of Eigen can be installed by pip, but you might prefer to
install this manually.  See section 4 below for more details.</p>
</div>
<div class="section" id="installing-python-dependencies">
<h3>Installing Python Dependencies<a class="headerlink" href="#installing-python-dependencies" title="Permalink to this headline">¶</a></h3>
<p>Normally, all of the python package dependencies will be automatically installed
by pip.  The following versions are known to work with GalSim 2.1.  In most cases,
other recent (especially later) versions will also work:</p>
<ul class="simple">
<li><p>NumPy (1.16.1)</p></li>
<li><p>Future (0.17.1)</p></li>
<li><p>Astropy (3.0.5)</p></li>
<li><p>PyBind11 (2.2.3)</p></li>
<li><p>LSSTDESC.Coord (1.0.5)</p></li>
</ul>
<p>There are a few others modules are not technically required, but we let pip
install them along with GalSim, because they either add useful functionality
or efficiency to GalSim.  These are listed in the requirements.txt file that
pip uses to determine what else to install.  But if you install with
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code>, then these will not be installed.</p>
<ul class="simple">
<li><p>Starlink (3.10.0)  (Improved WCS functionality)</p></li>
<li><p>PyYaml (3.12)      (Reads YAML config files)</p></li>
<li><p>Pandas (0.20)      (Faster reading of ASCII input files)</p></li>
</ul>
<p>If you want to install these yourself, the quickest way is to do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>If you want more control about which version you get or otherwise want to install
each package individually, you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">future</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">astropy</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pybind11</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">LSSTDESC</span><span class="o">.</span><span class="n">Coord</span>

<span class="n">pip</span> <span class="n">install</span> <span class="n">starlink</span><span class="o">-</span><span class="n">pyast</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pyyaml</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pandas</span>
</pre></div>
</div>
<p>In all cases, you may need to precede the above commands with <code class="docutils literal notranslate"><span class="pre">sudo</span></code> or
add <code class="docutils literal notranslate"><span class="pre">--user</span></code> to the end as you normally do when pip installing on your system.</p>
</div>
<div class="section" id="installing-fftw">
<h3>Installing FFTW<a class="headerlink" href="#installing-fftw" title="Permalink to this headline">¶</a></h3>
<p>GalSim uses FFTW (The Fastest Fourier Transform in the West) for performing
fast fourier transforms.</p>
<p>We require FFTW version &gt;= 3.0.  Most tests have been done with FFTW 3.3.7,
so if you have trouble with an earlier version, try upgrading to 3.3.7 or later.</p>
<div class="section" id="installing-fftw-yourself">
<h4>Installing FFTW yourself<a class="headerlink" href="#installing-fftw-yourself" title="Permalink to this headline">¶</a></h4>
<p>FFTW is available at the URL:</p>
<p><a class="reference external" href="http://www.fftw.org/download.html">http://www.fftw.org/download.html</a></p>
<p>As of this writing, version 3.3.7 is the current latest release, for which
the following commands should work to download and install it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">fftw</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">fftw</span><span class="o">-</span><span class="mf">3.3</span><span class="o">.</span><span class="mf">7.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="n">xfz</span> <span class="n">fftw</span><span class="o">-</span><span class="mf">3.3</span><span class="o">.</span><span class="mf">7.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">cd</span> <span class="n">fftw</span><span class="o">-</span><span class="mf">3.3</span><span class="o">.</span><span class="mi">7</span>
<span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">shared</span>
<span class="n">make</span>
<span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>If you want to install into a different directory (e.g. because you do not
have sudo privileges on your machine), then specify the alternate directory
with the –prefix flag to configure.  E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./configure --enable-shared --prefix=$HOME
</pre></div>
</div>
<p>which will install the library into $HOME/lib and the header file into
$HOME/include.  In this case, leave off the sudo from the last line.
Also, you should make sure these directories are in your LD_LIBRARY_PATH
and C_INCLUDE_PATH environment variables, respectively.</p>
<p>Alternatively, if you do not want to modify your LD_LIBRARY_PATH and/or
C_INCLUDE_PATH, you can instead set an environment variable to tell GalSim
where the files are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">FFTW_DIR</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">fftw</span><span class="o">/</span><span class="n">prefix</span>
</pre></div>
</div>
<p>E.g. in the above case where prefix is $HOME, you would do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export FFTW_DIR=$HOME
</pre></div>
</div>
<p>Probably, you should put this into your shell login file (e.g. .bash_profile)
so it always gets set when you log in.</p>
</div>
<div class="section" id="using-an-existing-installation-of-fftw">
<h4>Using an existing installation of FFTW<a class="headerlink" href="#using-an-existing-installation-of-fftw" title="Permalink to this headline">¶</a></h4>
<p>If FFTW is already installed on your system, there may be nothing to do.
If it is in a standard location like /usr/local/lib or in some other
directory in your LD_LIBRARY_PATH, then GalSim should find it without
any extra work on your part.</p>
<p>If it is in a non-standard location, and you do not want to add this path
to your LD_LIBRARY_PATH (or you are on a modern Mac that hides such system
variables from setup.py), then you can instead set the FFTW_DIR environment
variable to tell GalSim where to look:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">FFTW_DIR</span><span class="o">=/</span><span class="n">some</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">fftw</span>
</pre></div>
</div>
<p>For instance, if libfftw3.so is located in /opt/cray/pe/lib64, you could use
that with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">FFTW_DIR</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">cray</span><span class="o">/</span><span class="n">pe</span><span class="o">/</span><span class="n">lib64</span>
</pre></div>
</div>
<p>This command would normally be done in your .bash_profile file so it gets
executed every time you log in.</p>
<p>If you have multiple versions of FFTW installed on your system, this variable
can be used to specify which version you want GalSim to use as this will be
the first location it will check during the installation process.</p>
</div>
<div class="section" id="installing-fftw-with-conda">
<h4>Installing FFTW with conda<a class="headerlink" href="#installing-fftw-with-conda" title="Permalink to this headline">¶</a></h4>
<p>If you use conda, FFTW can be install with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">fftw</span>
</pre></div>
</div>
<p>This will put it into the anaconda/lib directory on your system (within your
active environment if appropriate).  GalSim knows to look here, so there is
nothing additional you need to do.</p>
</div>
<div class="section" id="installing-fftw-with-apt-get">
<h4>Installing FFTW with apt-get<a class="headerlink" href="#installing-fftw-with-apt-get" title="Permalink to this headline">¶</a></h4>
<p>On Linux machines that use apt-get, FFTW can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">libfftw3</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-fftw-with-fink">
<h4>Installing FFTW with fink<a class="headerlink" href="#installing-fftw-with-fink" title="Permalink to this headline">¶</a></h4>
<p>If you use fink on a Mac, FFTW can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fink</span> <span class="n">install</span> <span class="n">fftw3</span>
</pre></div>
</div>
<p>(Make sure to use fftw3, not fftw, since fftw is version 2.)</p>
<p>This will put it into the /sw/lib directory on your system. GalSim knows to
look here, so there is nothing additional you need to do.</p>
</div>
<div class="section" id="installing-fftw-with-macports">
<h4>Installing FFTW with MacPorts<a class="headerlink" href="#installing-fftw-with-macports" title="Permalink to this headline">¶</a></h4>
<p>If you use MacPorts, FFTW can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">port</span> <span class="n">install</span> <span class="n">fftw</span><span class="o">-</span><span class="mi">3</span>
</pre></div>
</div>
<p>This will put it into the /opt/local/lib directory on your system. GalSim knows
to look here, so there is nothing additional you need to do.</p>
</div>
</div>
<div class="section" id="installing-eigen">
<h3>Installing Eigen<a class="headerlink" href="#installing-eigen" title="Permalink to this headline">¶</a></h3>
<p>GalSim uses Eigen for the C++-layer linear algebra calculations.  It is a
header-only library, which means that nothing needs to be compiled to use it.
You can download the header files yourself, but if you do not, then we use
the pip-installable eigency module, which bundles the header files in their
installed python directory.  So usually, this dependency should require no
work on your part.</p>
<p>However, it might become useful to install Eigen separately from eigency
e.g. if you want to upgrade to a newer version of Eigen than the one that is
bundled with eigency.  (Eigen 3.2.8 is bundled with eigency 1.77.)  Therefore,
this section describes several options for how to obtain and install Eigen.</p>
<p>We require Eigen version &gt;= 3.0.  Most tests have been done with Eigen 3.2.8
or 3.3.4, but we have also tested on 3.0.4, so probably any 3.x version will
work.  However, if you have trouble with another version, try upgrading to
3.2.8 or later.</p>
<p>Note: Prior to version 2.0, GalSim used TMV for the linear algebra back end.
This is still an option if you prefer (e.g. it may be faster for some use
cases, since it can use an optimized BLAS library on your system), but to
use TMV, you need to use the SCons installation option described below.
(cf. <a class="reference internal" href="#installing-with-scons"><span class="std std-ref">Installing With SCons</span></a>)</p>
<div class="section" id="installing-eigen-yourself">
<h4>Installing Eigen yourself<a class="headerlink" href="#installing-eigen-yourself" title="Permalink to this headline">¶</a></h4>
<p>Eigen is available at the URL</p>
<p><a class="reference external" href="http://eigen.tuxfamily.org/index.php">http://eigen.tuxfamily.org/index.php</a></p>
<p>As of this writing, version 3.3.4 is the current latest release, for which
the following commands should work to download and install it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bitbucket</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">eigen</span><span class="o">/</span><span class="n">eigen</span><span class="o">/</span><span class="n">get</span><span class="o">/</span><span class="mf">3.3</span><span class="o">.</span><span class="mf">4.</span><span class="n">tar</span><span class="o">.</span><span class="n">bz2</span>
<span class="n">tar</span> <span class="n">xfj</span> <span class="mf">3.3</span><span class="o">.</span><span class="mf">4.</span><span class="n">tar</span><span class="o">.</span><span class="n">bz2</span>
<span class="n">sudo</span> <span class="n">cp</span> <span class="n">eigen</span><span class="o">-</span><span class="n">eigen</span><span class="o">-</span><span class="mi">5</span><span class="n">a0156e40feb</span><span class="o">/</span><span class="n">Eigen</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">include</span>
</pre></div>
</div>
<p>In the final cp line, the MD5 hash (5a0156e40feb) will presumably change for
other versions, so use whatever directory tar expands into if you are using
a different version than 3.3.4.</p>
<p>If you do not have sudo privileges, you can copy to a different directory such
as $HOME/include instead and leave off the sudo from the cp command.  In this
case, make sure this directory is in your C_INCLUDE_PATH environment variable.</p>
<p>Finally, you can also skip the last command above and instead set EIGEN_DIR
as an environment variable to tell GalSim where the files are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">EIGEN_DIR</span><span class="o">=/</span><span class="n">some</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">eigen</span>
</pre></div>
</div>
<p>This should be the directory in which the Eigen subdirectory is found.  E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export EIGEN_DIR=$HOME/eigen-eigen-5a0156e40feb
</pre></div>
</div>
<p>Probably, you should put this into your .bash_profile file so it always gets
set when you log in.</p>
</div>
<div class="section" id="using-an-existing-installation-of-eigen">
<h4>Using an existing installation of Eigen<a class="headerlink" href="#using-an-existing-installation-of-eigen" title="Permalink to this headline">¶</a></h4>
<p>If Eigen is already installed on your system, there may be nothing to do.
If it is in a standard location like /usr/local/include or in some other
directory in your C_INCLUDE_PATH, then GalSim should find it without
any extra work on your part.</p>
<p>If it is in a non-standard location, and you do not want to add this path
to your C_INCLUDE_PATH, then you can instead set the EIGEN_DIR environment
variable to tell GalSim where to look:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">EIGEN_DIR</span><span class="o">=/</span><span class="n">some</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">eigen</span>
</pre></div>
</div>
<p>For instance, if Eigen was installed into /usr/include/eigen3, then you
could use that with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">EIGEN_DIR</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">eigen3</span>
</pre></div>
</div>
<p>This command would normally be done in your .bash_profile file so it gets
executed every time you log in.</p>
<p>If you have multiple versions of Eigen installed on your system, this variable
can be used to specify which version you want GalSim to use as this will be
the first location it will check during the installation process.</p>
</div>
<div class="section" id="installing-eigen-with-conda">
<h4>Installing Eigen with conda<a class="headerlink" href="#installing-eigen-with-conda" title="Permalink to this headline">¶</a></h4>
<p>If you use conda, Eigen can be install with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">eigen</span>
</pre></div>
</div>
<p>This will put it into the anaconda/include directory on your system (within
your active environment if appropriate).  GalSim knows to look here, so there
is nothing additional you need to do.</p>
</div>
<div class="section" id="installing-eigen-with-apt-get">
<h4>Installing Eigen with apt-get<a class="headerlink" href="#installing-eigen-with-apt-get" title="Permalink to this headline">¶</a></h4>
<p>On Linux machines that use apt-get, Eigen can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">libeigen3</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-eigen-with-fink">
<h4>Installing Eigen with fink<a class="headerlink" href="#installing-eigen-with-fink" title="Permalink to this headline">¶</a></h4>
<p>If you use fink on a Mac, Eigen can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fink</span> <span class="n">install</span> <span class="n">eigen</span>
</pre></div>
</div>
<p>This will put it into the /sw/include directory on your system. GalSim knows
to look here, so there is nothing additional you need to do.</p>
</div>
<div class="section" id="installing-eigen-with-macports">
<h4>Installing Eigen with MacPorts<a class="headerlink" href="#installing-eigen-with-macports" title="Permalink to this headline">¶</a></h4>
<p>If you use MacPorts, Eigen can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">port</span> <span class="n">install</span> <span class="n">eigen</span>
</pre></div>
</div>
<p>This will put it into the /opt/local/include directory on your system. GalSim
knows to look here, so there is nothing additional you need to do.</p>
</div>
<div class="section" id="using-eigency">
<h4>Using eigency<a class="headerlink" href="#using-eigency" title="Permalink to this headline">¶</a></h4>
<p>Eigency is a pip-installable module that bundles the Eigen header files, so it
can also be used to install these files on your system.  Indeed, as mentioned
above, we will use eigency automatically if Eigen is not found in one of the
above locations.  So the above installations will take precendence, but
eigency should work as a fall-back.</p>
<p>Note: At the time of this writing, installation of eigency depends on having
cython already installed.  I thought I fixed this with PR #26, but it was
not quite complete.  There is now an open PR #27, which I believe will
finish making pip install eigency work, even if you do not have cython
installed.  But for now, you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">cython</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">eigency</span>
</pre></div>
</div>
<p>(in that order) to get it to work.  Alternatively, you can use my (MJ) version
which is the source of PR #27.  This is pip installable as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">rmjarvis</span><span class="o">.</span><span class="n">eigency</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="installing-with-conda">
<h2>Installing With Conda<a class="headerlink" href="#installing-with-conda" title="Permalink to this headline">¶</a></h2>
<p>If you use conda (normally via the Anaconda Python distribution), then all of
the prerequisites and galsim itself are available from the conda-forge channel,
so you can use that as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">galsim</span>
</pre></div>
</div>
<p>Also, if you prefer to use the defaults channel, then (at least as of this
writing), it had all the items in conda_requirements.txt, except for pybind11.
So if you have conda-forge in your list of channels, but it comes after
defaults, then that should still work and pybind11 will be the only one that
will need the conda-forge channel.</p>
<div class="section" id="running-tests">
<h3>Running tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h3>
<p>You can run our test suite by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span>
</pre></div>
</div>
<p>This should run all the python-layer tests with pytest and also compile and
run the C++ test suite.</p>
<p>There are a number of packages that are used by the tests, but which are not
required for GalSim installation and running.  These should be installed
automatically by the above command, but you can install them manually via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">test_requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>(As usually, you may need to add either <code class="docutils literal notranslate"><span class="pre">sudo</span></code> or <code class="docutils literal notranslate"><span class="pre">--user</span></code>.)</p>
<p>By default, the tests will run in parallel using the pytest plugins
<code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest-timeout</span></code> (to manage how much time each test is
allowed to run).  If you want to run the python tests in serial instead,
you can do this via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span> <span class="o">-</span><span class="n">j1</span>
</pre></div>
</div>
<p>You can also use this to modify how many jobs will be spawned for running the
tests.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your system does not have <code class="docutils literal notranslate"><span class="pre">pytest</span></code> installed, and you do not want
to install it, you can run all the Python tests with the script run_all_tests
in the <code class="docutils literal notranslate"><span class="pre">tests</span></code> directory. If this finishes without an error, then all the tests
have passed.  However, note that this script runs more tests than our normal
test run using pytest, so it may take quite a while to finish.  (The <em>all</em> in
the file name means run all the tests including the slow ones that we normally
skip.)</p>
</div>
</div>
<div class="section" id="running-example-scripts">
<h3>Running example scripts<a class="headerlink" href="#running-example-scripts" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory has a series of demo scripts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">demo1</span><span class="o">.</span><span class="n">py</span><span class="p">,</span> <span class="n">demo2</span><span class="o">.</span><span class="n">py</span><span class="p">,</span> <span class="o">...</span>
</pre></div>
</div>
<p>These can be considered a tutorial on getting up to speed with GalSim. Reading
through these in order will introduce you to how to use most of the features of
GalSim in Python.  To run these scripts, type (e.g.):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">demo1</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>There are also a corresponding set of config files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">demo1</span><span class="o">.</span><span class="n">yaml</span><span class="p">,</span> <span class="n">demo2</span><span class="o">.</span><span class="n">yaml</span><span class="p">,</span> <span class="o">...</span>
</pre></div>
</div>
<p>These files can be run using the executable <code class="docutils literal notranslate"><span class="pre">galsim</span></code>, and will produce the
same output images as the Python scripts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">galsim</span> <span class="n">demo1</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>They are also well commented, and can be considered a parallel tutorial for
learning the config file usage of GalSim.</p>
<p>All demo scripts are designed to be run in the <code class="docutils literal notranslate"><span class="pre">GalSim/examples</span></code> directory.
Some of them access files in subdirectories of the <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory, so they
would not work correctly from other locations.</p>
</div>
</div>
<div class="section" id="installing-with-scons">
<h2>Installing With SCons<a class="headerlink" href="#installing-with-scons" title="Permalink to this headline">¶</a></h2>
<p>Prior to version 2.0, GalSim installation used SCons.  This installation
mode is still supported, but is not recommended unless you have difficulties
with the pip or conda installation methods.</p>
<p>Note: Two options that are available with the SCons installation method,
but not the other methods, are (1) using TMV instead of Eigen for the linear
algebra back end, and (2) using Boost.Python instead of PyBind11 for the
wrapping the C++ code to be called from Python.  If you need either of these
options, then you should use the SCons installation.</p>
<div class="section" id="software-required-before-building-galsim">
<h3>Software required before building GalSim<a class="headerlink" href="#software-required-before-building-galsim" title="Permalink to this headline">¶</a></h3>
<p>Please note: Mac users who want to use fink can skip down to Section 5.ii and
use that to satisfy all dependencies before installing.</p>
<div class="section" id="python-2-7-3-4-3-5-or-3-6-series">
<h4>Python (2.7, 3.4, 3.5, or 3.6 series)<a class="headerlink" href="#python-2-7-3-4-3-5-or-3-6-series" title="Permalink to this headline">¶</a></h4>
<p>The interface to the GalSim code is via the Python package <code class="docutils literal notranslate"><span class="pre">galsim</span></code>, and its
associated modules. Therefore you must have Python installed on your system.
Python is free, and available from a number of sources online (see below).
Currently GalSim supports Python versions 2.7, 3.4, 3.5, and 3.6.  It is likely
that other Python 3.x versions are compatible, but these are the only ones
being actively tested.</p>
</div>
<div class="section" id="scons">
<h4>SCons<a class="headerlink" href="#scons" title="Permalink to this headline">¶</a></h4>
<p>You can download SCons from:</p>
<p><a class="reference external" href="http://www.scons.org">http://www.scons.org</a></p>
<p>GalSim uses SCons to configure and run its installation procedures, and so SCons
needs to be installed in advance. Versions 2.0 and 2.1 of SCons get reasonable
testing with GalSim, but it should also work with 1.x versions. You can check
if it is installed, and if so which version, by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>See Section 5 for some more suggestions about installing this on your platform.</p>
</div>
<div class="section" id="fftw">
<h4>FFTW<a class="headerlink" href="#fftw" title="Permalink to this headline">¶</a></h4>
<p>You can download FFTW from:</p>
<p><a class="reference external" href="http://www.fftw.org">http://www.fftw.org</a></p>
<p>These Fast Fourier Transform libraries must be installed, as GalSim will link
to them during the build. We require version 3 (or greater presumably), which
is often distributed as fftw3.  See Section 5 for some suggestions about
installing this on your platform.</p>
</div>
<div class="section" id="tmv-version-0-72">
<h4>TMV (version &gt;= 0.72)<a class="headerlink" href="#tmv-version-0-72" title="Permalink to this headline">¶</a></h4>
<p>GalSim can use either Eigen or TMV for its linear algebra routines.  See
the appropriate section in <a class="reference internal" href="#installation-instructions"><span class="std std-ref">Installation Instructions</span></a> if you want to use Eigen.
To use TMV (which was required prior to version 2.0), read on.</p>
<p>You should download TMV from</p>
<p><a class="reference external" href="https://github.com/rmjarvis/tmv/">https://github.com/rmjarvis/tmv/</a></p>
<p>and follow the instructions in its INSTALL file for how to install it.
Usually installing TMV just requires the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">install</span> <span class="n">PREFIX</span><span class="o">=&lt;</span><span class="n">installdir</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>but there are additional options you might consider, so you should read the TMV
INSTALL file for full details. Also note, you may not need to specify the
installation directory if you are comfortable installing it into <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>.
However, if you are trying to install it into a system directory then you need
to use sudo scons install [PREFIX=&lt;installdir&gt;].</p>
</div>
<div class="section" id="boost-c">
<h4>Boost C++<a class="headerlink" href="#boost-c" title="Permalink to this headline">¶</a></h4>
<p>GalSim can use either PyBind11 or Boost for wrapping the C++ code to use in
Python.  See the appropriate section in <a class="reference internal" href="#installation-instructions"><span class="std std-ref">Installation Instructions</span></a> if you want to use PyBind11.
To use Boost (which was required prior to version 2.0), read on.</p>
<p>GalSim makes use of some of the Boost C++ libraries, and these parts of Boost
must be installed. Currently GalSim is regularly tested to ensure it works with
Boost version 1.61, but it is likely that most versions released within the
last several years will also work. It is particularly important that your installed
Boost library links to the same version of Python with which you will be using
GalSim and on which you have installed NumPy and PyFITS (see Section ii, above).
Boost can be downloaded from</p>
<p><a class="reference external" href="http://www.boost.org">http://www.boost.org</a></p>
<p>and must be installed per the
(rather limited) instructions there, which essentially amount to using a command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>(Additional <code class="docutils literal notranslate"><span class="pre">bootstrap.sh</span></code> options may be necessary to ensure Boost is built
against the correct version of Python; see below).</p>
<p>followed by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">b2</span> <span class="n">link</span><span class="o">=</span><span class="n">shared</span>
<span class="o">./</span><span class="n">b2</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=&lt;</span><span class="n">INSTALL_DIR</span><span class="o">&gt;</span> <span class="n">link</span><span class="o">=</span><span class="n">shared</span> <span class="n">install</span>
</pre></div>
</div>
<p>If you are installing to a system directory, the second needs to be run as
root, of course: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">./b2</span> <span class="pre">...</span></code>  Also, you should be aware that if you are
running <code class="docutils literal notranslate"><span class="pre">b2</span></code> a second time, you should use <code class="docutils literal notranslate"><span class="pre">b2</span> <span class="pre">-a</span></code> to tell boost to
recompile everything rather than use the existing libraries.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">link=shared</span></code> is necessary to ensure that they are built as shared
libraries; this is automatic on some platforms, but not all.</p>
<p>Note: if you do not want to install everything related to Boost (which takes a
while), you can restrict to Boost Python and math by using <code class="docutils literal notranslate"><span class="pre">--with-python</span></code>
<code class="docutils literal notranslate"><span class="pre">--with-math</span></code> on the <code class="docutils literal notranslate"><span class="pre">./b2</span></code> commands.  Currently we are only using Boost Python
and parts of the math library so compiling and installing these two will likely
be sufficient for the foreseeable future.</p>
<p>Once you have installed Boost, you can check that it links to the version of
Python that will be used for GalSim and on which you have installed NumPy and
PyFITS by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ldd</span> <span class="o">&lt;</span><span class="n">YOUR_BOOST_LIB_DIR</span><span class="o">&gt;/</span><span class="n">libboost_python</span><span class="o">&lt;</span><span class="n">POSSIBLE_SUFFIX</span><span class="o">&gt;.</span><span class="n">so</span> <span class="p">(</span><span class="n">Linux</span><span class="p">)</span>
<span class="n">otool</span> <span class="o">-</span><span class="n">L</span> <span class="o">&lt;</span><span class="n">YOUR_BOOST_LIB_DIR</span><span class="o">&gt;/</span><span class="n">libboost_python</span><span class="o">&lt;</span><span class="n">POSSIBLE_SUFFIX</span><span class="o">&gt;.</span><span class="n">dylib</span> <span class="p">(</span><span class="n">OSX</span><span class="p">)</span>
</pre></div>
</div>
<p>(If the ldd command on Linux does not show the Python version, the command
<code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span> <span class="pre">&lt;YOUR_BOOST_LIB_LOCATION&gt;/libboost_python*</span></code> may show the version of
libboost_python.so linked to, for example, <code class="docutils literal notranslate"><span class="pre">libboost_python_py26.so.1.40.0</span></code>.
In such a case you can tell both the Python and Boost versions being used, 2.6
and <code class="docutils literal notranslate"><span class="pre">1.40.0</span></code>, respectively, in this example.)  On some Linux systems,
ldd will not indicate the Python library against which boost was
compiled; in this case, continue with the installation procedure and
any issues will be revealed at a later stage.</p>
<p>If the Python library listed is the one you will be using, all is well. If not,
Boost can be forced to use a different version by specifying the following
options to the ./bootstrap.sh installation script (defaults in <code class="docutils literal notranslate"><span class="pre">[]</span></code> brackets):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--with-python=PYTHON</span></code> specify the Python executable [python]</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--with-python-root=DIR</span></code> specify the root of the Python installation</dt><dd><p>[automatically detected, but some users have found
they have to force it to use a specific one because
it detected the wrong one]</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="python-dependencies">
<h4>Python dependencies<a class="headerlink" href="#python-dependencies" title="Permalink to this headline">¶</a></h4>
<p>The normal way in which you can install all the required python dependencies
is with pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>If you don’t want to use pip, you should make sure the following packages are
installed using your preferred installation method.  The versions given in
parentheses are known to work, but usually other recent version (especially
later) will also work.</p>
<ul class="simple">
<li><p>NumPy (1.16.1)</p></li>
<li><p>Future (0.17.1)</p></li>
<li><p>Astropy (3.0.5)</p></li>
<li><p>LSSTDESC.Coord (1.0.5)</p></li>
</ul>
<p>If you plan to use PyBind11, rather than Boost, then you should also install</p>
<ul class="simple">
<li><p>PyBind11 (2.2.3)</p></li>
</ul>
<p>If you plan to use Eigen rather than TMV, then you should also install</p>
<ul class="simple">
<li><p>PyBind11 (3.2.8)</p></li>
</ul>
<p>There are a few others modules are not technically required, but we include them
in the requirements.txt file, because they add either useful functionality
or efficiency to GalSim.</p>
<ul class="simple">
<li><p>Starlink (3.10.0)  (Improved WCS functionality)</p></li>
<li><p>PyYaml (3.12)      (Reads YAML config files)</p></li>
<li><p>Pandas (0.20)      (Faster reading of ASCII input files)</p></li>
</ul>
<p>If you want more control about which version you get or otherwise want to install
each package individually using pip, you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">future</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">astropy</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pybind11</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">LSSTDESC</span><span class="o">.</span><span class="n">Coord</span>

<span class="n">pip</span> <span class="n">install</span> <span class="n">starlink</span><span class="o">-</span><span class="n">pyast</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pyyaml</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pandas</span>
</pre></div>
</div>
<p>In all cases, you may need to precede the above commands with <code class="docutils literal notranslate"><span class="pre">sudo</span></code> or
add <code class="docutils literal notranslate"><span class="pre">--user</span></code> to the end as you normally do when pip installing on your system.</p>
</div>
</div>
<div class="section" id="installing-the-galsim-python-package">
<h3>Installing the GalSim Python package<a class="headerlink" href="#installing-the-galsim-python-package" title="Permalink to this headline">¶</a></h3>
<p>Once you have installed all the dependencies described above, you are ready to
build GalSim. From the GalSim base directory (in which this file is found) type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span>
</pre></div>
</div>
<p>If everything above was installed in fairly standard locations, this may work
the first time. Otherwise, you may have to tell SCons where to find some of
those libraries. There are quite a few options that you can use to tell SCons
where to look, as well as other things about the build process. To see a list
of options you can pass to SCons, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="o">-</span><span class="n">h</span>
</pre></div>
</div>
<p>(See also Section 5 below.)</p>
<p>As an example, to specify where your TMV library is located, you can type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">TMV_DIR</span><span class="o">=&lt;</span><span class="n">tmv</span><span class="o">-</span><span class="nb">dir</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;tmv-dir&gt;</span></code> would be the same as the <code class="docutils literal notranslate"><span class="pre">PREFIX</span></code> you specified when
installing TMV, i.e. The TMV library and include files are installed in
<code class="docutils literal notranslate"><span class="pre">&lt;tmv-dir&gt;/lib</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;tmv-dir&gt;/include</span></code>. Some important options that you may
need to set are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FFTW_DIR</span></code>: Explicitly give the FFTW prefix</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">USE_TMV</span></code>: Specify that you want to use TMV rather than Eigen.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TMV_DIR</span></code>: Explicitly give the TMV prefix</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EIGEN_DIR</span></code>: Explicitly give the Eigen prefix</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">USE_BOOST</span></code>: Specify that you want to use Boost rather than PyBind11.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOST_DIR</span></code>: Explicitly give the Boost prefix</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EXTRA_LIBS</span></code>: Additional libraries to send to the linker</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">EXTRA_INCLUDE_PATH</span></code>: Extra paths for header files (separated by<span class="classifier">if more</span></dt><dd><p>than 1)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">EXTRA_FLAGS</span></code>: Extra flags to send to the compiler other than what is</dt><dd><p>automatically used. (e.g. -m64 to force 64 bit compilation)</p>
</dd>
</dl>
</li>
</ul>
<p>Again, you can see the full list of options using <code class="docutils literal notranslate"><span class="pre">scons</span> <span class="pre">-h</span></code>.</p>
<p>Another common option is <code class="docutils literal notranslate"><span class="pre">CXX=&lt;c++compiler&gt;</span></code>. So, to compile with <code class="docutils literal notranslate"><span class="pre">icpc</span></code> rather
than the default <code class="docutils literal notranslate"><span class="pre">g++</span></code>, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">CXX</span><span class="o">=</span><span class="n">icpc</span>
</pre></div>
</div>
<p>On El Capitan, Apple instituted a new security measure wherein system calls
lose some of the system environment variables, including DYLD_LIBRARY_PATH
among others.  If your system is set up to use that environment variable to
resolve library locations at runtime, then this will cause problems when SCons
is trying to figure out if things are installed correctly.  To override this
behavior, you can explicitly send this environment variable to SCons by writing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>scons DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH
</pre></div>
</div>
<p>and it will be able to re-set this value within the SCons processing.</p>
<p>One nice feature of SCons is that once you have specified a parameter, it will
save that value for future builds in the file <code class="docutils literal notranslate"><span class="pre">gs_scons.conf</span></code>, so once you have
the build process working, for later builds you only need to type <code class="docutils literal notranslate"><span class="pre">scons</span></code>. It
can also be useful to edit this file directly – mostly if you want to unset a
parameter and return to the default value, it can be easier to just delete the
line from this file, rather than explicitly set it back to the default value.</p>
<p>SCons caches the results of the various checks it does for the required
external libraries (TMV, Boost, etc.). This is usually very helpful, since
they do not generally change, so it makes later builds much faster.  However,
sometimes (rarely) SCons can get confused and not realized that things on your
system have changed, which might cause problems for you. You can delete
everything scons knows about what it has tried to build previously with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="o">.</span><span class="n">scon</span><span class="o">*</span>
</pre></div>
</div>
<p>This will force SCons to recheck and recompile everything from scratch.</p>
<p>Once you have a successful build, you can install the GalSim library, Python
modules, and header files into standard locations (like <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code> and your
Python site-packages directory) with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">install</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">scons</span> <span class="n">install</span>
</pre></div>
</div>
<p>If you want to install into a different location, the prefix for the library
and header files can be specified with <code class="docutils literal notranslate"><span class="pre">PREFIX=&lt;installdir&gt;</span></code>, and the location
for the Python modules can be specified with <code class="docutils literal notranslate"><span class="pre">PYPREFIX=&lt;pythondir&gt;</span></code>. So the
command would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">install</span> <span class="n">PREFIX</span><span class="o">=&lt;</span><span class="n">installdir</span><span class="o">&gt;</span> <span class="n">PYPREFIX</span><span class="o">=&lt;</span><span class="n">pythondir</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Note: if you specify a specific directory for the Python modules with PYPREFIX,
this directory should be in the sys.path search path for the version of
Python you are using.  You can check with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import sys; print sys.path&quot;</span>
</pre></div>
</div>
<p>If your <code class="docutils literal notranslate"><span class="pre">PYPREFIX</span></code> directory is not there, then Python will not be able to find
the installed galsim module.  You should therefore add this directory to your
PYTHONPATH environment variable.  For example, if you use bash, then you
should add the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PYTHONPATH=$PYTHONPATH:&lt;pythondir&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;pythondir&gt;</span></code> is the same directory you used above for <code class="docutils literal notranslate"><span class="pre">PYPREFIX</span></code>.</p>
<p>The installed files can be removed with the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">uninstall</span>
</pre></div>
</div>
<p>Finally, to clean all compiled objects from the <code class="docutils literal notranslate"><span class="pre">GalSim</span></code> directory, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="o">-</span><span class="n">c</span>
</pre></div>
</div>
<p>This is rather like a <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code> command.</p>
<p>If you are having trouble with installing, you may find some helpful hints at
the GalSim Installation FAQ page on the Wiki:
<a class="reference external" href="https://github.com/GalSim-developers/GalSim/wiki/Installation%20FAQ">https://github.com/GalSim-developers/GalSim/wiki/Installation%20FAQ</a></p>
<p>You can ask also about your particular problem on stackoverflow.com.  Some of
the GalSim developers have automatic alerts set up for the tag ‘galsim’.  So
yout can ask your question there, and there is a good chance that it will be
answered.  You might also try searching that site to see if anyone else asked
about the same problem.</p>
<p>If you are still having trouble, please consider opening a new issue on the
GalSim Github page at <a class="reference external" href="https://github.com/GalSim-developers/GalSim/issues">https://github.com/GalSim-developers/GalSim/issues</a>
explaining what your particular problem is, and hopefully someone can help
you figure out a solution.</p>
</div>
<div class="section" id="running-tests-and-installing-example-executables">
<h3>Running tests and installing example executables<a class="headerlink" href="#running-tests-and-installing-example-executables" title="Permalink to this headline">¶</a></h3>
<p>You can run our test suite by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">tests</span>
</pre></div>
</div>
<p>This should compile the test suite and run it. The tests of our C++ library
will always be run, but we use <code class="docutils literal notranslate"><span class="pre">pytest</span></code> for our Python test suite, so that
will only be run if <code class="docutils literal notranslate"><span class="pre">pytest</span></code> is present on your system.  We do not require
this as a dependency, since you can still do everything with the GalSim library
without this.  But it is required for a complete run of the test suite.</p>
<p>To install <code class="docutils literal notranslate"><span class="pre">pytest</span></code>, you can also use easy_install as described in Section 1
above (see also <a class="reference external" href="https://docs.pytest.org/en/latest/">https://docs.pytest.org/en/latest/</a>). Many third party-
maintained Python distributions, such as the Enthought Python Distribution,
include <code class="docutils literal notranslate"><span class="pre">pytest</span></code>.</p>
<p>By default, the python tests will use the pytest plugins <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code> (for
running tests in parallel) and <code class="docutils literal notranslate"><span class="pre">pytest-timeout</span></code> (to manage how much time each
test is allowed to run).  These plugins are usually installable using pip::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pytest</span><span class="o">-</span><span class="n">xdist</span> <span class="n">pytest</span><span class="o">-</span><span class="n">timeout</span>
</pre></div>
</div>
<p>Sometimes the <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag may be needed in the above command to make the
plugins discoverable.  If you want to run the python tests without these
plugins (serially!), you can still do this via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">tests</span> <span class="o">-</span><span class="n">j1</span>
</pre></div>
</div>
<p>Note: if your system does not have <code class="docutils literal notranslate"><span class="pre">pytest</span></code> installed, and you do not want to
install it, you can run all the Python tests with the script run_all_tests in
the <code class="docutils literal notranslate"><span class="pre">tests</span></code> directory. If this finishes without an error, then all the tests
have passed.</p>
</div>
<div class="section" id="platform-specific-notes">
<h3>Platform-specific notes<a class="headerlink" href="#platform-specific-notes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="linux">
<h4>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h4>
<p>The vast majority of Linux distributions provide installable packages for most
of our dependencies. In many cases, however, it is also necessary to install
“-devel” or “-dev” packages (e.g. <code class="docutils literal notranslate"><span class="pre">python-dev</span></code> or <code class="docutils literal notranslate"><span class="pre">libboost-dev</span></code> on Debian-
derivatives). However, as above we stress that you should make sure that the
version of Python that Boost is built against must be the same as that you
intend to use for running GalSim.</p>
<p>The solution may be to install Boost C++ manually. This can be done by following
the instructions of Section 1.v), above.</p>
</div>
<div class="section" id="mac-osx">
<h4>Mac OSX<a class="headerlink" href="#mac-osx" title="Permalink to this headline">¶</a></h4>
<p>a) Use of Fink – the <code class="docutils literal notranslate"><span class="pre">fink</span></code> (<a class="reference external" href="http://www.finkproject.org">http://www.finkproject.org</a>) package management
software is popular with Mac users.  Once it is installed, you can get either
most or all of the prerequisites using it, depending on whether you want
to use GalSim with the fink version of Python (e.g. that in <code class="docutils literal notranslate"><span class="pre">/sw/bin/python</span></code>) or
the system Python (<code class="docutils literal notranslate"><span class="pre">/usr/bin/python</span></code>) or something else still.</p>
<p>It is in general a good idea to update fink prior to installing any new modules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fink</span> <span class="n">selfupdate</span>
<span class="n">fink</span> <span class="n">update</span><span class="o">-</span><span class="nb">all</span>
</pre></div>
</div>
<p>If you are happy with running GalSim using the fink version of python 2.7, you
can install everything with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fink</span> <span class="n">install</span> <span class="n">galsim</span>
</pre></div>
</div>
<p>and it should just work.  However, there are some caveats that are worth knowing
about (assuming your fink installation is in <code class="docutils literal notranslate"><span class="pre">/sw</span></code>):</p>
<p>1. This will install GalSim as a module of the python2.7 installed by fink.
This is not the default Python (usually <code class="docutils literal notranslate"><span class="pre">/usr/bin/python</span></code> or some other package,
such as EPD, if installed).  Any Python scripts you write that use the galsim
module should therefore have <code class="docutils literal notranslate"><span class="pre">#!/sw/bin/python2.7</span></code> as the  first line rather
than the usual <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/env</span> <span class="pre">python</span></code>.  Similarly, if you want to use galsim
in an interactive Python session, you should run <code class="docutils literal notranslate"><span class="pre">/sw/bin/python2.7</span></code> (simply
<code class="docutils literal notranslate"><span class="pre">python2.7</span></code> may also work) rather than just <code class="docutils literal notranslate"><span class="pre">python</span></code>.  (Of course, you can
always change your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable to make the fink Python the
system default if you wish…)</p>
<p>2. The executable <code class="docutils literal notranslate"><span class="pre">galsim</span></code>, which parses YAML or JSON configuration files,
will be installed in <code class="docutils literal notranslate"><span class="pre">/sw/bin</span></code>.  You should not need to do anything special
to use these, since <code class="docutils literal notranslate"><span class="pre">/sw/bin</span></code> should already be in your path if using fink.</p>
<p>3. If you want to run through the example scripts (such as the demo tutorials
<code class="docutils literal notranslate"><span class="pre">demo1.py</span></code>, <code class="docutils literal notranslate"><span class="pre">demo2.py</span></code> etc. and the <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> and <code class="docutils literal notranslate"><span class="pre">.json</span></code> config versions of the
same demos), you will still need to download the GalSim tarball.  But you can
skip all the instructions above about installation and just use the fink
version.  So <code class="docutils literal notranslate"><span class="pre">python2.7</span> <span class="pre">demo1.py</span></code> (assuming <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">python2.7</span></code> is the fink one)
and <code class="docutils literal notranslate"><span class="pre">galsim</span> <span class="pre">demo1.yaml</span></code> should run those scripts for you.</p>
<p>4.  If you want to work with GalSim as a developer, rather than just a user,
then you cannot use the fink-installed GalSim.  However, the process above will
have installed all the prerequisites.  So <code class="docutils literal notranslate"><span class="pre">fink</span> <span class="pre">uninstall</span> <span class="pre">galsim</span></code> will leave
you able to install GalSim using the master branch with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">TMV_DIR</span><span class="o">=/</span><span class="n">sw</span> <span class="n">PYTHON</span><span class="o">=/</span><span class="n">sw</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span> <span class="n">BOOST_DIR</span><span class="o">=/</span><span class="n">sw</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">boost</span><span class="o">-</span><span class="mi">1_58</span>
</pre></div>
</div>
<p>from within the repository base directory.</p>
<p>To run the unit tests, you will also need pytest, which you can also get from
fink:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fink</span> <span class="n">install</span> <span class="n">pytest</span><span class="o">-</span><span class="n">py27</span>
<span class="n">scons</span> <span class="n">tests</span> <span class="n">PYTEST</span><span class="o">=/</span><span class="n">sw</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">pytest</span>
</pre></div>
</div>
<p>If you want to use the system Python, or some other version, then the fink
Python installations will not work.  You will need to manually install
NumPy, PyFITS, PyYAML and pytest, for example using easy_install, with your
chosen Python.</p>
<p>For the system Python, you can use fink for Boost, but you will want a
different package than the boost1.58.python27 that gets installed using
<code class="docutils literal notranslate"><span class="pre">fink</span> <span class="pre">install</span> <span class="pre">galsim</span></code> above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fink</span> <span class="n">install</span> <span class="n">scons</span> <span class="n">fftw3</span> <span class="n">tmv0</span> <span class="n">boost1</span><span class="o">.</span><span class="mi">58</span><span class="o">-</span><span class="n">systempython</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">future</span>
<span class="n">scons</span> <span class="n">TMV_DIR</span><span class="o">=/</span><span class="n">sw</span> <span class="n">BOOST_DIR</span><span class="o">=/</span><span class="n">sw</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">boost</span><span class="o">-</span><span class="mi">1_58</span>
</pre></div>
</div>
<p>For other Python versions, the fink-installed Boost usually will not work, so
you can only use fink for SCons, FFTW and TMV.  So you will probably need to
install Boost manually.  This can be done by following the instructions of
Section 1.v), above.</p>
<p>b) MacPorts – this is another popular Mac package management project
(<a class="reference external" href="http://www.macports.org/">http://www.macports.org/</a>) with similar functionality to fink.  Neither TMV nor
GalSim are currently on the official MacPorts distribution list, so users cannot
find them by searching the MacPorts site.  However, it is possible to install
both TMV and GalSim, plus the other dependencies of GalSim, using MacPorts
following the instructions below.</p>
<p>It is in general a good idea to upgrade all modules, prior to installing any new
modules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">port</span> <span class="n">selfupdate</span>
<span class="n">sudo</span> <span class="n">port</span> <span class="n">upgrade</span> <span class="n">outdated</span>
</pre></div>
</div>
<p>Below is a list of steps to take to install GalSim using MacPorts:</p>
<blockquote>
<div><p>i) Take the <code class="docutils literal notranslate"><span class="pre">Portfiles</span></code> from the GalSim repository:
<a class="reference external" href="https://github.com/GalSim-developers/GalSim/blob/master/devel/ports.tar.gz">https://github.com/GalSim-developers/GalSim/blob/master/devel/ports.tar.gz</a>
(If you do not clone the repository, there is a “copy” button on the website
that you can use to download the file directly.)
ii) Place the file in your home directory.
iii) <code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">xvzf</span> <span class="pre">ports.tar.gz</span></code>
iv) <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">ports</span></code>
v) <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">portindex</span></code>
vi) <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">port</span> <span class="pre">install</span> <span class="pre">python27</span></code>
vii) <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">port</span> <span class="pre">select</span> <span class="pre">--set</span> <span class="pre">python</span> <span class="pre">python27</span></code>
viii) <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">sh</span> <span class="pre">-c</span> <span class="pre">&quot;echo</span> <span class="pre">file:///Users/username/ports</span> <span class="pre">&gt;&gt;</span> <span class="pre">/opt/local/etc/macports/sources.conf&quot;</span></code>
ix) <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">port</span> <span class="pre">install</span> <span class="pre">galsim</span></code>
x) Add <code class="docutils literal notranslate"><span class="pre">/opt/local/lib</span></code> to <code class="docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code></p>
</div></blockquote>
<p>Some users may find that the last step results in an inability to import the
GalSim module.  In that case, you can clear that addition to DYLD_LIBRARY_PATH
and instead add /opt/local/lib to DYLD_FALLBACK_LIBRARY_PATH.</p>
<p>c) Homebrew (<a class="reference external" href="http://mxcl.github.com/homebrew/">http://mxcl.github.com/homebrew/</a>) – another package manager for
Max OSX.  Currently GalSim is available on homebrew, so it (plus dependencies)
should be installable via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">tap</span> <span class="n">camphogg</span><span class="o">/</span><span class="n">science</span>
<span class="n">brew</span> <span class="n">install</span> <span class="n">gal</span><span class="o">-</span><span class="n">sim</span>
</pre></div>
</div>
</div>
<div class="section" id="docker">
<h4>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h4>
<p>Karen Ng has created a Docker file for containerizing GalSim.  See her repo:</p>
<p><a class="reference external" href="https://github.com/karenyyng/GalSim_dockerfile">https://github.com/karenyyng/GalSim_dockerfile</a></p>
<p>for instructions about how to either use her image or create your own.</p>
</div>
</div>
<div class="section" id="more-scons-options">
<h3>More SCons options<a class="headerlink" href="#more-scons-options" title="Permalink to this headline">¶</a></h3>
<p>Here is a fairly complete list of the options you can pass to SCons to control
the build process. The options are listed with their default value. You change
them simply by specifying a different value on the command line.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="n">CXX</span><span class="o">=</span><span class="n">icpc</span> <span class="n">TMV_DIR</span><span class="o">=~</span>
</pre></div>
</div>
<p>(Unlike autotools, SCons correctly expands ~ to your home directory.)
You can list these options from the command line with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scons</span> <span class="o">-</span><span class="n">h</span>
</pre></div>
</div>
<div class="section" id="basic-flags-about-the-c-compilation-default-values-in-parentheses">
<h4>Basic flags about the C++ compilation (default values in parentheses)<a class="headerlink" href="#basic-flags-about-the-c-compilation-default-values-in-parentheses" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CXX</span></code> (g++) specifies which C++ compiler to use.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">FLAGS</span></code> (‘’) specifies the basic flags to pass to the compiler.  The default</dt><dd><p>behavior is to automatically choose good flags to use according to which
kind of compiler you are using. This option overrides that and lets you
specify exactly what flags to use.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">EXTRA_FLAGS</span></code> (‘’) specifies some extra flags that you want to use in addition</dt><dd><p>to the defaults that SCons determines on its own. Unlike the above option,
this do not override the defaults, it just adds to them.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">LINK_FLAGS</span></code> (‘’) specifies some extra flags at the linking step to use in</dt><dd><p>addition to the defaults that SCons determines it needs on its own.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> (True) specifies whether to keep the debugging assert statements in</dt><dd><p>the compiled library code. They are not much of a performance hit, so it is
generally worth keeping them in, but if you need to squeeze out every last
bit of performance, you can set this to False.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">EXTRA_DEBUG</span></code> (False) specifies whether to add a flag to keep the original</dt><dd><p>code information in the compiled library (-g3 for g++ compiler).  This
increases the size of the compiled library, but makes debugging with things
like gdb easier.  Probably end users will never need to use this.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">WARN</span></code> (False) specifies whether to add warning compiler flags such as</dt><dd><p><code class="docutils literal notranslate"><span class="pre">-Wall</span></code>.</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">COVER</span></code> (False) specifies whether to add unit test coverage of the C++ layer.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">PYTHON</span></code> (/usr/bin/env python) specifies which version of Python you are</dt><dd><p>planning to use GalSim with.  If you choose not to use the default here,
then you need to remember to use the correct Python version</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="flags-about-where-to-install-the-library-and-modules">
<h4>Flags about where to install the library and modules<a class="headerlink" href="#flags-about-where-to-install-the-library-and-modules" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">PREFIX</span></code> (/usr/local) specifies where to install the library when running</dt><dd><p><code class="docutils literal notranslate"><span class="pre">scons</span> <span class="pre">install</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">PYPREFIX</span></code> ([your python dir]/site-packages) specifies where to install the</dt><dd><p>Python modules when running <code class="docutils literal notranslate"><span class="pre">scons</span> <span class="pre">install</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">FINAL_PREFIX</span></code> (<code class="docutils literal notranslate"><span class="pre">PREFIX</span></code>) specifies the final installation prefix if different</dt><dd><p>from PREFIX.  (This is only needed for things like fink, where they install
into a staging area first before copying over to the final location.)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">WITH_UPS</span></code> (False) specified whether to install the ups directory for use</dt><dd><p>with EUPS.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="flags-that-specify-where-to-look-for-external-libraries">
<h4>Flags that specify where to look for external libraries<a class="headerlink" href="#flags-that-specify-where-to-look-for-external-libraries" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">FFTW_DIR</span></code> (‘’) specifies the root location of FFTW. The header files should</dt><dd><p>be in <code class="docutils literal notranslate"><span class="pre">FFTW_DIR/include</span></code> and the library files in <code class="docutils literal notranslate"><span class="pre">FFTW_DIR/lib</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">EIGEN_DIR</span></code> (‘’) specifies the root location of the Eigen header files.</dt><dd><p>The Core include file for Eigen should located at <code class="docutils literal notranslate"><span class="pre">EIGEN_DIR/Eigen/Core</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">USE_TMV</span></code> (False) specifies to use TMV rather than Eigen for the linear</dt><dd><p>algebra code in the C++ layer.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">TMV_DIR</span></code> (‘’) specifies the location of TMV if it is not in a standard</dt><dd><p>location. This should be the same value as you used for PREFIX when
installing TMV.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">TMV_LINK</span></code> (‘’) specifies the location of the tmv-link file. Normally, this is</dt><dd><p>in <code class="docutils literal notranslate"><span class="pre">TMV_DIR/share</span></code>, but if not, you can specify the correct location here.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">USE_BOOST</span></code> (False) specifies whether to use Boost.Python for wrapping the</dt><dd><p>C++ code rather than PyBind11.  If this is set, it will also use your
Boost installation for some header files used by the random number
generator code. We bundle the boost.random implementation from a specific
boost version (1.48) to make sure “random” variable generation is
deterministic across machines and over time.  To make it fully self-
contained, we edited them slightly to not include many of the complicated
workarounds boost has for specific compilers and such.  However, those
workarounds can be reenabled by setting USE_BOOST=True if your system needs
them.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">BOOST_DIR</span></code> (‘’) specifies the root location of BOOST The header files should</dt><dd><p>be in <code class="docutils literal notranslate"><span class="pre">BOOST_DIR/include/boost</span></code> and the library files in <code class="docutils literal notranslate"><span class="pre">BOOST_DIR/lib</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">EXTRA_INCLUDE_PATH</span></code> (‘’) specifies extra directories in which to search for</dt><dd><p>header files in addition to the standard locations such as <code class="docutils literal notranslate"><span class="pre">/usr/include</span></code> and
<code class="docutils literal notranslate"><span class="pre">/usr/local/include</span></code> and the ones derived from the above options.  Sometimes
the above options do not quite work, so you may need to specify other
locations, which is what this option is for.  These directories are specified
as <code class="docutils literal notranslate"><span class="pre">-I</span></code> flags to the compiler.  If you are giving multiple directories, they
should be separated by colons.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">EXTRA_LIB_PATH</span></code> (‘’) specifies extra directories in which to search for</dt><dd><p>libraries in addition to the standard locations such as <code class="docutils literal notranslate"><span class="pre">/usr/lib</span></code> and
<code class="docutils literal notranslate"><span class="pre">/usr/local/lib</span></code>.  These directories are specified as <code class="docutils literal notranslate"><span class="pre">-L</span></code> flags to the
linker. If you are giving multiple directories, they should be separated by
colons.  To add the library <code class="docutils literal notranslate"><span class="pre">/blah/libfoo.a</span></code>, specify
<code class="docutils literal notranslate"><span class="pre">EXTRA_LIB_PATH=/blah/</span> <span class="pre">EXTRA_LIBS=foo</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">EXTRA_PATH</span></code> (‘’) specifies directories in which to search for executables</dt><dd><p>(notably the compiler, although you can also just give the full path in the
CXX parameter) in addition to the standard locations such as <code class="docutils literal notranslate"><span class="pre">/usr/bin</span></code> and
<code class="docutils literal notranslate"><span class="pre">/usr/local/bin</span></code>.  If you are giving multiple directories, they should be
separated by colons.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">IMPORT_PATHS</span></code> (False) specifies whether to import extra path directories</dt><dd><p>from the environment variables: <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">C_INCLUDE_PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>
and <code class="docutils literal notranslate"><span class="pre">LIBRARY_PATH</span></code>.  If you have a complicated setup in which you use these
environment variables to control everything, this can be an easy way to let
SCons know about these locations.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">IMPORT_ENV</span></code> (True) specifies whether to import the entire environment from</dt><dd><p>the calling shell.  The default is for SCons to use the same environment as
the shell from which it is called.  However, sometimes it can be useful to
start with a clean environment and manually add paths for various things, in
which case you would want to set this to False.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">EXTRA_LIBS</span></code> (‘’) specifies libraries to use in addition to what SCons finds</dt><dd><p>on its own. This might be useful if you have a non-standard name for one of
the external libraries. e.g. If you want to use the Intel MKL library for the
FFTW library, SCons will not automatically try that, so you could add those
libraries here.  If there is more than one, they should be quoted with spaces
between the different libraries. e.g.
<code class="docutils literal notranslate"><span class="pre">EXTRA_LIBS=&quot;mkl_intel</span> <span class="pre">mkl_intel_thread</span> <span class="pre">mkl_core&quot;</span></code></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">IMPORT_PREFIX</span></code> (True) specifies whether to include the directories</dt><dd><p><code class="docutils literal notranslate"><span class="pre">PREFIX/include</span></code>, <code class="docutils literal notranslate"><span class="pre">PREFIX/lib</span></code> and <code class="docutils literal notranslate"><span class="pre">PREFIX/bin</span></code> as part of the standard
path lists.  Normally, you install everything in the same place, so it is
useful to search those locations for some of the prerequisite packages, so
the default is True.  But occasionally, this might be inconvenient, so you
can turn this feature off.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code> (‘’) Set the DYLD_LIBRARY_PATH inside of SCons.</dt><dd><p>Particularly useful on El Capitan (and later), since Apple strips out
DYLD_LIBRARY_PATH from the environment that SCons sees, so if you need it,
this option enables SCons to set it back in for you by doing
<code class="docutils literal notranslate"><span class="pre">scons</span> <span class="pre">DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">DYLD_FALLBACK_LIBRARY_PATH</span></code> (‘’) Set the DYLD_FALLBACK_LIBRARY_PATH inside</dt><dd><p>of SCons.  cf. DYLD_LIBRARY_PATH for why this may be useful.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> (‘’) Set the LD_LIBRARY_PATH inside of SCons.</dt><dd><p>cf. DYLD_LIBRARY_PATH for why this may be useful.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="miscellaneous-flags">
<h4>Miscellaneous flags<a class="headerlink" href="#miscellaneous-flags" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">PYTEST</span></code> (pytest) specifies which version of pytest you want to use</dt><dd><p>for running the unit tests.  If you specified a non-default Python, then
there is a possibility that the standard pytest executable in your path
will not work (since it might be for a different version of Python).  In
that case, specify the correct pytest here.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">CACHE_LIB</span></code> (True) specifies whether to cache the results of the library</dt><dd><p>checks.  While you are working one getting the prerequisites installed
properly, it can be useful to set this to False to force SCons to redo all of
its library checks each time. Once you have a successful build, you should
set it back to True so that later builds can skip those checks.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">WITH_PROF</span></code> (False) specifies whether to use the compiler flag <code class="docutils literal notranslate"><span class="pre">-pg</span></code> to</dt><dd><p>include profiling info for <code class="docutils literal notranslate"><span class="pre">gprof</span></code>.</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEM_TEST</span></code> (False) specifies whether to test the code for memory leaks.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">TMV_DEBUG</span></code> (False) specifies whether to turn on extra (slower) debugging</dt><dd><p>statements within the TMV library.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">USE_UNKNOWN_VARS</span></code> (False) specifies whether to accept scons parameters other</dt><dd><p>than the ones listed here.  Normally, another name would indicate a typo, so
we catch it and let you know.  But if you want to use other scons options
that we did not list here, you would want to also set this to True.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="image.html" class="btn btn-neutral float-right" title="Images and Related Concepts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, GalSim-developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>